(this["webpackJsonpsafe-react"]=this["webpackJsonpsafe-react"]||[]).push([[35],{2100:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e,t){return"Step ".concat(e," of ").concat(t)}},2110:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var a=n(17),r=n(269),i=n(1),c=n.p+"static/media/qrcode.fec1b6d8.svg",s=n(391),o=n(233),l=n.n(o),d=n(2140),u=n.n(d),b=n(5),j=n(268),O=Object(j.a)({heading:{padding:b.lg,justifyContent:"space-between",maxHeight:"75px",boxSizing:"border-box"},loaderContainer:{width:"100%",height:"100%"},close:{height:"25px",width:"25px",color:b.secondaryText},detailsContainer:{backgroundColor:b.background,maxHeight:"450px"},buttonRow:{height:"84px",justifyContent:"center"},button:{"&:last-child":{marginLeft:b.sm}}}),f=n(87),p=n(156),m=n(181),x=n(157),h=n(166),g=n(59),v=n(81),y=n(0),k=Object(r.a)(O),w=function(e){var t=e.isOpen,n=e.onClose,r=e.onScan,c=k(),o=Object(i.useState)(!1),d=Object(a.a)(o,2),b=d[0],j=d[1],O=Object(i.useState)(null),w=Object(a.a)(O,2),T=w[0],S=w[1],P=Object(i.useState)(!1),R=Object(a.a)(P,2),I=R[0],C=R[1],E=i.createRef(),B=i.useCallback((function(){E.current.openImageDialog()}),[E]);Object(i.useEffect)((function(){b||!I||T||(j(!0),B())}),[I,B,b,j,T]);var M=function(e,t){if(e)return console.error("QR code error",e),void("NotAllowedError"===e.name||"PermissionDismissedError"===e.name?(C(!0),j(!1)):S("The QR could not be read"));t?r(t):I&&S("The QR could not be read")};return Object(y.jsxs)(f.c,{description:"Receive Tokens Form",handleClose:n,open:t,title:"Receive Tokens",children:[Object(y.jsxs)(v.a,{align:"center",className:c.heading,grow:!0,children:[Object(y.jsx)(g.a,{noMargin:!0,size:"xl",children:"Scan QR"}),Object(y.jsx)(s.a,{disableRipple:!0,onClick:n,children:Object(y.jsx)(l.a,{className:c.close})})]}),Object(y.jsx)(h.a,{}),Object(y.jsxs)(x.a,{className:c.detailsContainer,layout:"column",middle:"xs",children:[T&&Object(y.jsx)(p.a,{padding:"md",margin:"md",children:T}),Object(y.jsx)(u.a,{legacyMode:I,onError:function(e){return M(e,null)},onScan:function(e){return M(null,e)},ref:E,style:{width:"400px",height:"400px"},facingMode:"user"})]}),Object(y.jsx)(h.a,{}),Object(y.jsxs)(v.a,{align:"center",className:c.buttonRow,children:[Object(y.jsx)(m.a,{className:c.button,color:"secondary",minWidth:154,onClick:n,children:"Close"}),Object(y.jsx)(m.a,{className:c.button,color:"primary",minWidth:154,onClick:function(){C(!0),S(null),j(!1)},variant:"contained",children:"Upload an image"})]})]})},T=n(126),S=Object(r.a)({qrCodeBtn:{cursor:"pointer"}}),P=function(e){var t=e.handleScan,n=e.testId,r=S(),s=Object(i.useState)(!1),o=Object(a.a)(s,2),l=o[0],d=o[1],u=function(){d(!1)};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(T.a,{alt:"Scan QR",className:r.qrCodeBtn,height:20,onClick:function(){d(!0)},role:"button",src:c,testId:n||"qr-icon"}),l&&Object(y.jsx)(w,{isOpen:l,onClose:u,onScan:function(e){t(e,u)}})]})}},2119:function(e,t,n){"use strict";var a=n(3),r=n(40),i=n(698),c=n(705),s=n(717),o=n(715),l=n(0),d=["name","onChange","value"],u=["classes","disableError","formControlProps","input","label","meta","renderValue"],b={minWidth:"100%"};t.a=function(e){var t=e.classes,n=e.disableError,j=e.formControlProps,O=e.input,f=O.name,p=O.onChange,m=O.value,x=Object(r.a)(O,d),h=e.label,g=e.meta,v=e.renderValue,y=Object(r.a)(e,u),k=(g.submitError&&!g.dirtySinceLastSubmit||g.error)&&g.touched&&!n,w=Object(a.a)(Object(a.a)({},x),{},{name:f});return Object(l.jsxs)(i.a,Object(a.a)(Object(a.a)({},j),{},{error:k,style:b,children:[Object(l.jsx)(s.a,{htmlFor:f,children:h}),Object(l.jsx)(o.a,Object(a.a)({classes:t,inputProps:w,onChange:p,renderValue:v,value:m,variant:"outlined"},y)),k&&Object(l.jsx)(c.a,{children:g.error||g.submitError})]}))}},2129:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(7),r=n(8),i=n(14),c=n(15),s=n(768),o=n(771),l=n(769),d=n(1060),u=n(1),b=n(0),j=function(e){if(e)return{maxWidth:"".concat(e,"px")}},O=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).changeSort=function(t,n){return function(){(0,e.props.onSort)(t,n)}},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.columns,a=t.order,r=t.orderBy;return Object(b.jsx)(o.a,{children:Object(b.jsx)(l.a,{children:n.map((function(t){return Object(b.jsx)(s.a,{align:t.align,padding:t.disablePadding?"none":"normal",sortDirection:r===t.id&&a,children:t.static?Object(b.jsx)("div",{style:t.style,children:t.label}):Object(b.jsx)(d.a,{active:r===t.id,direction:a,onClick:e.changeSort(t.id,t.order),style:t.style,children:t.label})},t.id)}))})})}}]),n}(u.PureComponent);t.b=O},2142:function(e,t,n){"use strict";var a,r=n(10),i=n(9),c=n(0),s=i.default.button(a||(a=Object(r.a)(["\n  background: none;\n  color: inherit;\n  border: none;\n  padding: 0;\n  font: inherit;\n  cursor: pointer;\n  border-radius: 50%;\n  transition: background-color 0.2s ease-in-out;\n  outline-color: transparent;\n  height: 24px;\n  width: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  :hover {\n    background-color: ",";\n  }\n"])),(function(e){return e.theme.colors.separator}));t.a=function(e){var t=e.onClick,n=void 0===t?function(){}:t,a=e.children,r=e.dataTestId;return Object(c.jsx)(s,{onClick:n,type:"button","data-testid":r,children:a})}},2146:function(e,t,n){"use strict";var a=n(7),r=n(8),i=n(14),c=n(15),s=n(13),o=n(828),l=n(770),d=n(1058),u=n(23),b=n(1),j=n(2129),O=n(105),f=function(e,t,n,a,r){var i=a?"".concat(n,"Order"):n;return r(t[i])<r(e[i])?-1:r(t[i])>r(e[i])?1:0},p=n(81),m=n(5),x=n(0),h={root:{backgroundColor:"white",borderTopRightRadius:m.sm,borderTopLeftRadius:m.sm,boxShadow:"1px 2px 10px 0 rgba(212, 212, 211, 0.59)"},selectRoot:{lineHeight:m.xxl,backgroundColor:"white"},white:{backgroundColor:"white"},paginationRoot:{backgroundColor:"white",boxShadow:"1px 2px 10px 0 rgba(212, 212, 211, 0.59)",marginBottom:"90px",borderBottomRightRadius:m.sm,borderBottomLeftRadius:m.sm},loader:{boxShadow:"1px 2px 10px 0 rgba(212, 212, 211, 0.59)"}},g={"aria-label":"Previous Page"},v={"aria-label":"Next Page"},y=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).onSort=function(e,t){var n=r.state,a=n.order,i=n.orderBy,c=r.props.defaultOrder,s="desc";a&&i===e&&"desc"===a?s="asc":a||"desc"!==c||(s="asc"),r.setState((function(){return{order:s,orderBy:e,orderProp:t,fixed:!1}}))},r.getEmptyStyle=function(){return{height:"calc(100vh - ".concat(255,"px)"),borderTopRightRadius:m.sm,borderTopLeftRadius:m.sm,backgroundColor:"white",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},r.handleChangePage=function(e,t){r.setState({page:t})},r.handleChangeRowsPerPage=function(e){var t=Number(e.target.value);r.setState({rowsPerPage:t})},r.state={page:0,order:void 0,orderBy:void 0,fixed:void 0,orderProp:!1,rowsPerPage:void 0},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.columns,n=e.defaultOrderBy;n&&t&&(t.find((function(e){return e.id===n})).order&&this.setState({orderProp:!0}))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.classes,a=e.columns,r=e.data,i=e.defaultFixed,c=e.defaultOrder,u=e.defaultOrderBy,b=e.defaultRowsPerPage,m=e.disableLoadingOnEmptyTable,h=e.disablePagination,y=e.label,k=e.noBorder,w=e.size,T=this.state,S=T.fixed,P=T.order,R=T.orderBy,I=T.orderProp,C=T.page,E=T.rowsPerPage,B=R||u,M=P||c,N=E||b,L="undefined"!==typeof S?S:!!i,A={selectRoot:n.selectRoot,root:!k&&n.paginationRoot,input:n.white},z=a.find((function(e){return e.id===B})),V=function(e,t,n){var a=n?e.filter((function(e){return e.fixed})):Object(O.a)([]),r=(n?e.filter((function(e){return!e.fixed})):e).map((function(e,t){return[e,t]})),i=(r=r.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]}))).map((function(e){return e[0]}));return a.concat(i)}(r,function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e};return"desc"===e?function(e,r){return f(e,r,t,n,a)}:function(e,r){return-f(e,r,t,n,a)}}(M,B,I,null===z||void 0===z?void 0:z.formatTypeSort),L);h||(V=V.slice(C*N,C*N+N));var D=0===w&&!m;return Object(x.jsxs)(x.Fragment,{children:[!D&&Object(x.jsxs)(o.a,{"aria-labelledby":y,className:k?"":n.root,children:[Object(x.jsx)(j.b,{columns:a,onSort:this.onSort,order:P,orderBy:B}),Object(x.jsx)(l.a,{children:t(V)})]}),D&&Object(x.jsx)(p.a,{className:n.loader,style:this.getEmptyStyle(),children:Object(x.jsx)(s.Loader,{size:"sm"})}),!h&&Object(x.jsx)(d.a,{backIconButtonProps:g,classes:A,component:"div",count:w,nextIconButtonProps:v,onPageChange:this.handleChangePage,onRowsPerPageChange:this.handleChangeRowsPerPage,page:C,rowsPerPage:N,rowsPerPageOptions:[5,10,25,50,100]})]})}}]),n}(b.Component);y.defaultProps={defaultOrder:"asc",disablePagination:!1,defaultRowsPerPage:5};t.a=Object(u.a)(h)(y)},2150:function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return N}));var a=n(40),r=n(17),i=n(3),c=n(2),s=n.n(c),o=n(11),l=n(702),d=n(3140),u=n(1),b=n(21),j=n(158),O=n(179),f=n(263),p=n(46),m=n(34),x=n(269),h=n(268),g=Object(x.a)(Object(h.a)({root:{overflow:"hidden"}})),v=Object(x.a)(Object(h.a)({input:{padding:"16px !important"}})),y=n(90),k=n(82),w=n(29),T=n(78),S=n(69),P=n(30),R=n(183),I=n(112),C=n(0),E=["setIsValidAddress","setSelectedEntry"],B=function(e){var t=e.addressBookEntries,n=e.fieldMutator,a=e.label,r=void 0===a?"Recipient":a,c=e.setIsValidAddress,u=e.setSelectedEntry,O=e.setValidationText,x=e.validationText,h=Object(b.d)(S.a),E=function(e){u(e),n(e.address)},B=function(e){var n=Object(j.k)(e);if(c(!n),!n){var a=Object(R.b)(e).address,r=Object(T.a)(a)||a,i=Object(f.b)(t,{inputValue:r});return 1===i.length?i[0]:r}O(n)},M=function(){var e=Object(o.a)(s.a.mark((function e(t,a,r){var i,c,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r,e.next="input"===e.t0?3:31;break;case 3:if(i=Object(k.c)(a)){e.next=6;break}return e.abrupt("break",31);case 6:if(!Object(I.d)(P.FEATURES.DOMAIN_LOOKUP)||!Object(p.e)(i)&&!Object(p.d)(i)){e.next=24;break}return c="",e.prev=8,e.next=11,Object(m.b)(i);case 11:c=e.sent,e.next=17;break;case 14:e.prev=14,e.t1=e.catch(8),Object(w.c)(w.b._101,e.t1.message);case 17:if(o=B(c)){e.next=21;break}return n(""),e.abrupt("break",31);case 21:return E("string"===typeof o?{address:c,name:i,chainId:h}:o),e.abrupt("break",31);case 24:if(l=B(i)){e.next=28;break}return n(""),e.abrupt("break",31);case 28:return E("string"===typeof l?{address:l,name:"",chainId:h}:l),e.abrupt("break",31);case 31:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t,n,a){return e.apply(this,arguments)}}(),N=g(),L=v();return Object(C.jsx)(d.a,{closeIcon:null,openOnFocus:!1,filterOptions:f.b,freeSolo:!0,onChange:function(e,t,n){if("select-option"===n){var a=t,r=a.address,i=a.name,c=a.chainId;E({address:r,name:i,chainId:c})}},onInputChange:M,options:t,id:"address-book-input",renderInput:function(e){return Object(C.jsx)(l.a,Object(i.a)(Object(i.a)({},e),{},{autoFocus:!0,error:!!x,fullWidth:!0,variant:"outlined",label:x||r,InputLabelProps:{shrink:!0,required:!0,classes:N},InputProps:Object(i.a)(Object(i.a)({},e.InputProps),{},{classes:L}),inputProps:Object(i.a)(Object(i.a)({},e.inputProps),{},{"data-testid":"address-book-input"})}))},getOptionLabel:function(e){return e.address},renderOption:function(e){var t=e.address,n=e.name;return Object(C.jsx)(y.a,{hash:t,name:n,showAvatar:!0})},role:"listbox",style:{display:"flex",flexGrow:1}})},M=function(e){var t=Object(b.d)(O.d),n=Object(u.useState)(""),a=Object(r.a)(n,2),c=a[0],s=a[1];return Object(u.useEffect)((function(){e.errorMsg&&s(e.errorMsg)}),[e.errorMsg]),Object(C.jsx)(B,Object(i.a)({addressBookEntries:t,setValidationText:s,validationText:c},e))},N=function(e){var t=e.setIsValidAddress,n=e.setSelectedEntry,c=Object(a.a)(e,E),l=Object(b.d)(O.d),d=Object(u.useState)([]),p=Object(r.a)(d,2),m=p[0],x=p[1],h=Object(u.useState)(""),g=Object(r.a)(h,2),v=g[0],y=g[1];Object(u.useEffect)((function(){var e=function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)(l);case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[l]);var k=function(){var e=Object(o.a)(s.a.mark((function e(a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===a||void 0===a?void 0:a.address)){e.next=7;break}return e.next=3,Object(j.l)(a.address);case 3:r=e.sent,t(!r),y(null!==r&&void 0!==r?r:""),n(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)(B,Object(i.a)({addressBookEntries:m,setIsValidAddress:t,setSelectedEntry:k,setValidationText:y,validationText:v},c))}},2153:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a,r,i=n(10),c=n(9),s=n(741),o=n(59),l=n(156),d=n(0),u=c.default.div(a||(a=Object(i.a)(["\n  width: 100%;\n  text-align: center;\n"]))),b=Object(c.default)(l.a)(r||(r=Object(i.a)(["\n  width: 40px;\n  margin: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  & img {\n    width: 26px;\n    height: auto;\n  }\n"]))),j=function(e){var t=e.token,n=e.text;return Object(d.jsxs)(u,{children:[Object(d.jsx)(b,{children:Object(d.jsx)("img",{alt:t.name,onError:s.a,src:t.logoUri||""})}),Object(d.jsx)(o.a,{size:"xl",color:"black600",noMargin:!0,style:{marginTop:"8px"},children:n})]})}},2239:function(e,t,n){"use strict";n(828);var a=n(768);n.d(t,"a",(function(){return a.a}));var r=n(769);n.d(t,"b",(function(){return r.a}));n(0)},2338:function(e,t,n){"use strict";var a=n(3),r=n(13),i=n(831),c=n(2075),s=n(815),o=n(254),l=n(2119),d=n(158),u=n(126),b=n(236),j=n(741),O=n(269),f=n(268),p=n(5),m=Object(O.a)(Object(f.a)({container:{background:"none !important",padding:"0",width:"100%"},tokenData:{padding:0,margin:0,lineHeight:"14px"},tokenImage:{display:"block",marginRight:p.sm,height:28,width:"auto"}})),x=Object(O.a)(Object(f.a)({selectMenu:{paddingRight:0}})),h=n(0),g=function(e){var t,n,a=e.tokenAddress,o=e.tokens,l=m(),d=o.find((function(e){return e.address===a}));return Object(h.jsx)(s.a,{className:l.container,disableRipple:!0,children:d?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(i.a,{children:Object(h.jsx)(u.a,{className:l.tokenImage,alt:d.name,onError:j.a,src:d.logoUri||""})}),Object(h.jsx)(c.a,{className:l.tokenData,primary:d.name,secondary:"".concat(Object(b.a)(null!==(t=null===(n=d.balance)||void 0===n?void 0:n.tokenBalance.toString())&&void 0!==t?t:"0")," ").concat(d.symbol)})]}):Object(h.jsx)(r.Text,{color:"placeHolder",size:"xl",children:"Select an asset*"})})};t.a=function(e){var t=e.initialValue,n=e.isValid,r=void 0===n||n,O=e.tokens,f=x(),p=m();return Object(h.jsx)(o.a,{classes:{selectMenu:f.selectMenu},className:r?"isValid":"isInvalid",component:function(e){return Object(h.jsx)(l.a,Object(a.a)(Object(a.a)({},e),{},{inputProps:{"data-testid":"token-input"}}))},displayEmpty:!0,initialValue:t,name:"token",renderValue:function(e){return Object(h.jsx)(g,{tokenAddress:e,tokens:O})},validate:d.p,children:O.map((function(e){var t,n;return Object(h.jsxs)(s.a,{value:e.address,children:[Object(h.jsx)(i.a,{children:Object(h.jsx)(u.a,{className:p.tokenImage,alt:e.name,onError:j.a,src:e.logoUri||""})}),Object(h.jsx)(c.a,{primary:e.name,secondary:"".concat(Object(b.a)(null!==(t=null===(n=e.balance)||void 0===n?void 0:n.tokenBalance.toString())&&void 0!==t?t:"0")," ").concat(e.symbol),"data-testid":"select-token-".concat(e.name)})]},e.address)}))})}},3124:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(17),i=n(10),c=n(13),s=n(1),o=n(21),l=n(9),d=n(156),u=n(157),b=n(81),j=n(56),O=n(104),f=n(829),p=n(141),m=n.n(p),x=n(2142),h=n(2239),g=n(2146),v=n(107),y=n(374),k=n(166),w=n(87),T=n(69),S=n(271),P=n(694),R=n(466),I=n(91),C=n(778),E=n(164),B=n(762),M=n(467),N=n(2153),L=n(28),A=n(2128),z=n(224),V=n(71),D=n(0),F=function(e){var t,n,a=e.onClose,i=e.spendingLimit,c=e.open,l=Object(P.a)(i.spent.tokenAddress),d=Object(V.a)().safeAddress,b=Object(s.useState)(""),j=Object(r.a)(b,2),O=j[0],f=j[1],p=Object(o.c)(),m=Object(o.d)(T.a),x=Object(z.c)(m);Object(s.useEffect)((function(){var e=i.beneficiary,t=i.spent.tokenAddress,n=Object(C.d)({beneficiary:e,tokenAddress:t});f(n)}),[i]);var h=null!==(t=null===(n=Object(B.b)().find((function(e){return+e.value===+i.resetTime.resetTimeMin})))||void 0===n?void 0:n.label)&&void 0!==t?t:"";return Object(D.jsx)(w.b,{handleClose:a,open:c,title:"Remove spending limit",description:"Remove the selected spending limit",children:Object(D.jsxs)(M.a,{txData:O,txTo:x,onSubmit:function(e,t){if(x)try{p(Object(R.b)({safeAddress:d,to:x,valueInWei:"0",txData:O,txNonce:e.safeNonce,safeTxGas:e.safeTxGas,ethParameters:e,notifiedTransaction:I.a.REMOVE_SPENDING_LIMIT_TX,delayExecution:t})),Object(L.d)(A.a.SPENDING_LIMIT.LIMIT_REMOVED)}catch(n){console.error("failed to remove spending limit ".concat(i.beneficiary," -> ").concat(i.spent.tokenAddress),n.message)}},onClose:a,submitText:"Remove",children:[Object(D.jsx)(S.a,{onClose:a,title:"Remove spending limit"}),Object(D.jsx)(k.a,{}),Object(D.jsxs)(w.b.Body,{children:[Object(D.jsx)(u.a,{align:"center",margin:"md",children:l&&Object(D.jsx)(N.a,{token:l,text:"".concat(Object(E.a)(i.spent.amount,l.decimals)," ").concat(l.symbol)})}),Object(D.jsx)(u.a,{margin:"md",children:Object(D.jsx)(y.a,{title:"Beneficiary",address:i.beneficiary,color:"placeHolder"})}),Object(D.jsx)(u.a,{children:Object(D.jsx)(y.b,{title:"Reset Time",label:h,color:"placeHolder"})})]})]})})},G=n(797),H=n(16),W=n(105),_=n(223),U="beneficiary",q="spent",Q="resetTime",Y=n(236),J=n(741);function K(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var X,Z,$,ee,te,ne,ae,re,ie,ce,se=l.default.img(X||(X=Object(i.a)(["\n  width: 32px;\n  height: 32px;\n  object-fit: contain;\n  margin: 0 8px 0 0;\n"]))),oe=l.default.div(Z||(Z=Object(i.a)(["\n  display: flex;\n  align-items: center;\n"]))),le=function(e){var t=e.amount,n=e.spent,a=e.tokenAddress,i=function(){var e=Object(s.useState)(K()),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){function e(){a(K())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}().width,o=Object(s.useMemo)((function(){return i>1024}),[i]),l=Object(P.a)(a),d=function(e){var t=e.amount,n=e.spent,a=e.tokenInfo;return Object(s.useMemo)((function(){if(a){var e=Object(Y.a)(Object(E.a)(n,a.decimals)).toString();return{amount:Object(Y.a)(Object(E.a)(t,a.decimals)).toString(),spent:e}}}),[t,n,a])}({amount:t,spent:n,tokenInfo:l});return d&&l?Object(D.jsxs)(oe,{children:[o&&Object(D.jsx)(se,{alt:l.name,onError:J.a,src:l.logoUri||""}),Object(D.jsx)(c.Text,{size:"lg",children:"".concat(d.spent," of ").concat(d.amount," ").concat(l.symbol)})]}):null},de=function(e){var t=e.data,n=Object(G.a)(),i=Object(o.d)(O.b),l=function(){var e={align:"left",custom:!1,disablePadding:!1,id:U,label:"Beneficiary",order:!1},t={align:"left",custom:!1,disablePadding:!1,id:q,label:"Spent",order:!1,static:!0},n={align:"left",custom:!1,disablePadding:!1,id:Q,label:"Reset Time",order:!1,static:!0},a={custom:!0,disablePadding:!1,id:"action",label:"",order:!1};return Object(W.a)([e,t,n,a])}(),d=l.filter((function(e){return!e.custom})),u=Object(s.useState)(),j=Object(r.a)(u,2),p=j[0],k=j[1];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(f.a,{style:{minHeight:"440px"},children:Object(D.jsx)(g.a,{columns:l,data:t,defaultFixed:!0,defaultOrderBy:U,defaultRowsPerPage:5,label:"Spending limits",noBorder:!0,size:null===t||void 0===t?void 0:t.length,children:function(e){return e.map((function(t,r){return Object(D.jsxs)(h.b,{className:m()(n.hide,r>=3&&r===e.size-1&&n.noBorderBottom),"data-testid":"spending-limit-table-row",tabIndex:-1,children:[d.map((function(e,n){var r=e.id,i=t[r];return Object(D.jsxs)(h.a,{align:e.align,component:"td",children:[r===U&&Object(D.jsx)(y.a,{address:i}),r===q&&Object(D.jsx)(le,Object(a.a)({},i)),r===Q&&Object(D.jsx)(c.Text,{size:"lg",children:i.relativeTime})]},"".concat(r,"-").concat(n))})),Object(D.jsx)(h.a,{component:"td",children:Object(D.jsx)(b.a,{align:"end",className:n.actions,children:i&&Object(D.jsx)(v.a,Object(a.a)(Object(a.a)({},A.a.SPENDING_LIMIT.REMOVE_LIMIT),{},{children:Object(D.jsx)(x.a,{onClick:function(){return k(t)},"data-testid":"remove-limit-btn",children:Object(D.jsx)(c.Icon,{size:"sm",type:"delete",color:"error",tooltip:"Remove limit"})})}))})})]},r)}))}})}),p&&Object(D.jsx)(F,{onClose:function(){return k(void 0)},spendingLimit:p,open:!0})]})},ue=n(2),be=n.n(ue),je=n(11),Oe=n(758),fe=n(46),pe=n(740),me=n(695),xe=n(253),he=n(2110),ge=n(90),ve=n(22),ye=n(179),ke=n(2150),we=n(82),Te=n(158),Se=l.default.div($||($=Object(i.a)(["\n  grid-area: beneficiaryInput;\n  max-width: 100%;\n  word-break: break-all;\n"]))),Pe=l.default.div(ee||(ee=Object(i.a)(["\n  grid-area: beneficiaryScan;\n"]))),Re=function(){var e=Object(xe.e)().initialValues,t=Object(xe.d)().mutators,n=Object(s.useState)(""),a=Object(r.a)(n,2),i=a[0],c=a[1],l=Object(s.useState)({address:(null===e||void 0===e?void 0:e.beneficiary)||"",name:""}),d=Object(r.a)(l,2),u=d[0],b=d[1],j=Object(s.useState)(!(null===e||void 0===e?void 0:e.beneficiary)),O=Object(r.a)(j,2),f=O[0],p=O[1];Object(s.useEffect)((function(){var e;null===u&&(null===t||void 0===t||null===(e=t.setBeneficiary)||void 0===e||e.call(t,""),f&&p(!1))}),[t,f,u]);var m=Object(o.d)(ye.d);return(null===u||void 0===u?void 0:u.address)?Object(D.jsx)(Se,{role:"button","aria-pressed":"false",tabIndex:0,onKeyDown:function(e){Object(we.a)(e.key,"Tab")||b(null)},onClick:function(){b(null)},children:Object(D.jsx)(ge.a,{hash:u.address,name:u.name,showCopyBtn:!0,showAvatar:!0,textSize:"lg",explorerUrl:Object(ve.i)(u.address)})}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Se,{children:Object(D.jsx)(ke.a,{fieldMutator:null===t||void 0===t?void 0:t.setBeneficiary,pristine:f,errorMsg:i,setSelectedEntry:b,setIsValidAddress:function(){},label:"Beneficiary"})}),Object(D.jsx)(Pe,{children:Object(D.jsx)(he.a,{handleScan:function(e,n){var a,r,i=e.startsWith("ethereum:")?e.replace("ethereum:",""):e,s=null===(a=m.find((function(e){var t=e.address;return Object(fe.f)(i,t)})))||void 0===a?void 0:a.name,o=Object(Te.k)(i);o?c(o):(null===t||void 0===t||null===(r=t.setBeneficiary)||void 0===r||r.call(t,i),b({name:s,address:i}),c(""));n()}})})]})},Ie=n(2338),Ce=l.default.div(te||(te=Object(i.a)(["\n  grid-area: tokenInput;\n"]))),Ee=function(){var e=Object(o.d)(O.a);return Object(D.jsx)(Ce,{children:Object(D.jsx)(Ie.a,{tokens:e})})},Be=n(2100),Me=l.default.div(ne||(ne=Object(i.a)(["\n  padding: 24px;\n  align-items: center;\n  display: grid;\n  grid-template-columns: 4fr auto;\n  grid-template-rows: 6fr;\n  gap: 16px 8px;\n  grid-template-areas:\n    'beneficiaryInput beneficiaryScan'\n    'tokenInput .'\n    'amountInput .'\n    'resetTimeLabel resetTimeLabel'\n    'resetTimeToggle resetTimeToggle'\n    'resetTimeOption resetTimeOption';\n"]))),Ne={setBeneficiary:function(e,t,n){n.changeValue(t,"beneficiary",(function(){return e[0]}))}},Le=function(e){var t=e.invalid,n=e.submitting,a=e.dirtyFieldsSinceLastSubmit,r=e.values,i=r.beneficiary,c=r.token,s=r.amount;return!(n||t||!i||!c||!s||!a)},Ae=function(e){var t=e.initialValues,n=e.onCancel,a=e.onReview;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(S.a,{onClose:n,title:"New spending limit",subTitle:Object(Be.a)(1,2)}),Object(D.jsx)(k.a,{}),Object(D.jsx)(pe.a,{formMutators:Ne,onSubmit:a,initialValues:t,children:function(){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(Me,{children:[Object(D.jsx)(Re,{}),Object(D.jsx)(Ee,{}),Object(D.jsx)(me.b,{}),Object(D.jsx)(B.a,{})]}),Object(D.jsx)(w.b.Footer,{children:Object(D.jsx)(w.b.Footer.Buttons,{cancelButtonProps:{onClick:n},confirmButtonProps:{disabled:!Le(arguments.length<=2?void 0:arguments[2]),text:"Review"}})})]})}})]})},ze=n(57),Ve=n(438),De=function(e){var t,n;return null!==(t=null===(n=Object(B.b)().find((function(t){return t.value===e.resetTimeMin})))||void 0===n?void 0:n.label)&&void 0!==t?t:"One-time spending limit"},Fe=function(){var e=Object(je.a)(be.a.mark((function e(t,n,a,r,i,c,s,o,l,d){var u,b,j,O,f,p,m,x;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b=Object(Ve.d)(o,l),j=[],b||!t){e.next=7;break}return e.next=5,Object(C.c)(t,n,a,l);case 5:O=e.sent,j.push(O);case 7:return!(null!==(u=null===r||void 0===r?void 0:r.some((function(e){var t=e.delegate;return Object(fe.f)(t,null===s||void 0===s?void 0:s.beneficiary)})))&&void 0!==u&&u)&&(null===s||void 0===s?void 0:s.beneficiary)&&j.push(Object(C.a)(s.beneficiary,l)),i&&"0"!==i.spent&&j.push(Object(C.e)(i.delegate,c.address,l)),f=Object(C.b)()-30,p={beneficiary:s.beneficiary,token:s.token,spendingLimitInWei:Object(E.c)(s.amount,c.decimals),resetTimeMin:s.withResetTime?+s.resetTime:0,resetBaseMin:s.withResetTime?f:0},t&&(0===j.length?m=Object(C.i)({spendingLimitArgs:p,safeAddress:t,moduleAddress:l}):(x=Object(C.h)({spendingLimitArgs:p,safeAddress:t,moduleAddress:l}),j.push(x),m=Object(C.k)({transactions:j,safeAddress:t})),d&&(m.txNonce=d.safeNonce,m.safeTxGas=d.safeTxGas?d.safeTxGas:void 0,m.ethParameters=d)),e.abrupt("return",{spendingLimitTxData:m,transactions:j,spendingLimitArgs:p});case 14:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,c,s,o,l,d){return e.apply(this,arguments)}}(),Ge=function(e){var t=e.onBack,n=e.onClose,i=e.txToken,l=e.values,d=Object(o.c)(),O=Object(o.d)(j.a),f=O.address,p=void 0===f?"":f,m=O.spendingLimits,x=O.currentVersion,h=void 0===x?"":x,g=O.modules,v=Object(o.d)(ze.g),T=function(e){var t=e.spendingLimits,n=e.txToken,r=e.values;return Object(s.useMemo)((function(){var e=null===t||void 0===t?void 0:t.find((function(e){var t=e.delegate,n=e.token;return Object(fe.f)(t,r.beneficiary)&&Object(fe.f)(n,r.token)}));return void 0!==e?Object(a.a)(Object(a.a)({},e),{},{amount:Object(E.a)(e.amount,n.decimals)}):null}),[t,n.decimals,r.beneficiary,r.token])}({spendingLimits:m,txToken:i,values:l}),P=Object(s.useState)({to:"",txData:""}),I=Object(r.a)(P,2),C=I[0],V=I[1],F=Object(s.useMemo)((function(){return(null===g||void 0===g?void 0:g.map((function(e){return e[1]})))||[]}),[g]);Object(s.useEffect)((function(){var e=function(){var e=Object(je.a)(be.a.mark((function e(){var t,n,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(z.c)(Object(ve.b)())){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Fe(p,h,v,m,T,i,l,F,t);case 5:n=e.sent,a=n.spendingLimitTxData,V(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[p,h,v,m,T,i,l,F]);var G=function(){var e=Object(je.a)(be.a.mark((function e(t,n){var r,c,s,o,u,b,j;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(z.c)(Object(ve.b)())){e.next=3;break}return e.abrupt("return");case 3:if(c=t.ethGasPrice,s=t.ethGasLimit,o=t.ethGasPriceInGWei,u=Object(a.a)(Object(a.a)({},t),{},{ethGasPrice:c,ethGasPriceInGWei:o,ethGasLimit:s}),!p){e.next=12;break}return e.next=8,Fe(p,h,v,m,T,i,l,F,r,u);case 8:b=e.sent,j=b.spendingLimitTxData,d(Object(R.b)(Object(a.a)(Object(a.a)({},j),{},{delayExecution:n}))),Object(L.d)(Object(a.a)(Object(a.a)({},A.a.SPENDING_LIMIT.RESET_PERIOD),{},{label:l.withResetTime?"".concat(l.resetTime," minutes"):"never"}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=Object(s.useMemo)((function(){var e;return l.withResetTime?null===(e=Object(B.b)().find((function(e){return e.value===l.resetTime})))||void 0===e?void 0:e.label:""}),[l.resetTime,l.withResetTime]);return Object(D.jsxs)(M.a,{txData:C.txData||"",txTo:C.to,operation:C.operation,onSubmit:G,onBack:function(){return t({values:{},txToken:Object(Oe.a)(),step:He})},submitText:"Submit",isSubmitDisabled:void 0===T,children:[Object(D.jsx)(S.a,{onClose:n,title:"New spending limit",subTitle:Object(Be.a)(2,2)}),Object(D.jsx)(k.a,{}),Object(D.jsxs)(w.b.Body,{children:[Object(D.jsxs)(u.a,{align:"center",margin:"md",children:[Object(D.jsx)(N.a,{token:i,text:"".concat(Object(E.a)(Object(E.c)(l.amount,i.decimals),i.decimals)," ").concat(i.symbol)}),T&&Object(D.jsxs)(c.Text,{size:"lg",color:"error",center:!0,children:["Previous Amount: ",T.amount]})]}),Object(D.jsx)(u.a,{margin:"md",style:{wordBreak:"break-all"},children:Object(D.jsx)(y.a,{address:l.beneficiary,title:"Beneficiary",color:"placeHolder"})}),Object(D.jsxs)(u.a,{margin:"md",children:[Object(D.jsx)(y.b,{title:"Reset Time",label:H,color:"placeHolder"}),T&&Object(D.jsx)(b.a,{align:"center",margin:"md",children:Object(D.jsxs)(c.Text,{size:"lg",color:"error",children:["Previous Reset Time: ",De(T)]})})]}),T&&Object(D.jsx)(u.a,{children:Object(D.jsx)(c.Text,{size:"xl",color:"error",center:!0,strong:!0,children:"You are about to replace an existent spending limit"})})]})]})},He="CREATE",We="REVIEW",_e=function(e,t){var n=t.type,r=t.newState,i=t.tokens;switch(n){case He:return Object(a.a)(Object(a.a)({},e),{},{step:He});case We:var c;return Object(a.a)(Object(a.a)(Object(a.a)({},e),r),{},{txToken:null!==(c=i.find((function(e){return Object(fe.f)(e.address,r.values.token)})))&&void 0!==c?c:e.txToken,step:We})}},Ue=function(e){var t=e.close,n=e.open,a=function(e){var t=Object(o.d)(O.a),n=Object(s.useReducer)(_e,{step:e,txToken:Object(Oe.a)(),values:{}},(function(e){return e})),a=Object(r.a)(n,2),i=a[0],c=a[1];return[i,{create:Object(s.useCallback)((function(e){return c({type:He,newState:e,tokens:t})}),[t]),review:Object(s.useCallback)((function(e){return c({type:We,newState:e,tokens:t})}),[t])}]}(He),i=Object(r.a)(a,2),c=i[0],l=c.step,d=c.txToken,u=c.values,b=i[1],j=b.create,f=b.review,p=function(){var e=Object(je.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f({step:l,txToken:d,values:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)(w.b,{handleClose:t,open:n,title:"New spending limit",description:"set rules for specific beneficiaries to access funds from this Safe without having to collect all signatures",children:[l===He&&Object(D.jsx)(Ae,{initialValues:u,onCancel:t,onReview:p}),l===We&&Object(D.jsx)(Ge,{onBack:j,onClose:t,txToken:d,values:u})]})},qe=n(126),Qe=n.p+"static/media/asset-amount.ac4f3737.svg",Ye=n.p+"static/media/beneficiary.4c7afb97.svg",Je=n.p+"static/media/time.efbdb87c.svg",Ke=l.default.div(ae||(ae=Object(i.a)(["\n  display: flex;\n  justify-content: space-around;\n  margin-top: 20px;\n  max-width: 720px;\n  text-align: center;\n"]))),Xe=l.default.div(re||(re=Object(i.a)(["\n  width: 24%;\n  min-width: 120px;\n  max-width: 164px;\n"]))),Ze=l.default.div(ie||(ie=Object(i.a)(["\n  height: 2px;\n  flex: 1;\n  background: #d4d5d3;\n  margin: 46px 0;\n"]))),$e=function(){return Object(D.jsxs)(Ke,{children:[Object(D.jsxs)(Xe,{children:[Object(D.jsx)(qe.a,{alt:"Select Beneficiary",title:"Beneficiary",height:96,src:Ye}),Object(D.jsx)(c.Text,{size:"lg",color:"placeHolder",strong:!0,center:!0,children:"Select Beneficiary"}),Object(D.jsx)(c.Text,{size:"lg",color:"placeHolder",center:!0,children:"Define beneficiary that will be able to use the allowance."}),Object(D.jsx)(c.Text,{size:"lg",color:"placeHolder",center:!0,children:"The beneficiary does not have to be an owner of this Safe"})]}),Object(D.jsx)(Ze,{}),Object(D.jsxs)(Xe,{children:[Object(D.jsx)(qe.a,{alt:"Select asset and amount",title:"Asset and Amount",height:96,src:Qe}),Object(D.jsx)(c.Text,{size:"lg",color:"placeHolder",strong:!0,center:!0,children:"Select asset and amount"}),Object(D.jsx)(c.Text,{size:"lg",color:"placeHolder",center:!0,children:"You can set a spending limit for any asset stored in your Safe"})]}),Object(D.jsx)(Ze,{}),Object(D.jsxs)(Xe,{children:[Object(D.jsx)(qe.a,{alt:"Select time",title:"Time",height:96,src:Je}),Object(D.jsx)(c.Text,{size:"lg",color:"placeHolder",strong:!0,center:!0,children:"Select time"}),Object(D.jsx)(c.Text,{size:"lg",color:"placeHolder",center:!0,children:"You can choose to set a one-time spending limit or to have it automatically refill after a defined time-period"})]})]})},et=Object(l.default)(c.Text)(ce||(ce=Object(i.a)(["\n  margin-top: 16px;\n"])));t.default=function(){var e,t=Object(G.a)(),n=Object(o.d)(O.b),i=Object(o.d)(j.h),l=null===(e=i)||void 0===e?void 0:e.map((function(e){var t;return t={},Object(H.a)(t,U,e.delegate),Object(H.a)(t,q,{spent:e.spent,amount:e.amount,tokenAddress:e.token}),Object(H.a)(t,Q,{relativeTime:Object(_.f)(e.lastResetMin,e.resetTimeMin),lastResetMin:e.lastResetMin,resetTimeMin:e.resetTimeMin}),t})),f=Object(s.useState)(!1),p=Object(r.a)(f,2),m=p[0],x=p[1];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(d.a,{className:t.container,grow:"grow",children:[Object(D.jsx)(c.Title,{size:"xs",withoutMargin:!0,children:"Spending limit"}),Object(D.jsx)(et,{size:"lg",children:"You can set rules for specific beneficiaries to access funds from this Safe without having to collect all signatures."}),(null===l||void 0===l?void 0:l.length)?Object(D.jsx)(de,{data:l}):Object(D.jsx)($e,{})]}),n&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(b.a,{align:"end",className:t.buttonRow,grow:!0,children:Object(D.jsx)(u.a,{end:"xs",children:Object(D.jsx)(v.a,Object(a.a)(Object(a.a)({},A.a.SPENDING_LIMIT.NEW_LIMIT),{},{children:Object(D.jsx)(c.Button,{className:t.actionButton,color:"primary",size:"md","data-testid":"new-spending-limit-button",onClick:function(){x(!0)},variant:"contained",children:"New spending limit"})}))})}),m&&Object(D.jsx)(Ue,{close:function(){x(!1)},open:!0})]})]})}}}]);
//# sourceMappingURL=35.e9d44759.chunk.js.map