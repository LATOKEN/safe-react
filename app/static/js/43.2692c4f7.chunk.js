(this["webpackJsonpsafe-react"]=this["webpackJsonpsafe-react"]||[]).push([[43],{2113:function(e,t,n){"use strict";var r,a,i,c=n(10),s=n(9),o=n(13),d=n(0),l=s.default.div(r||(r=Object(c.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  margin: 8px 0;\n\n  svg {\n    margin: 0 12px 0 4px;\n  }\n"]))),u=Object(s.default)(o.Divider)(a||(a=Object(c.a)(["\n  width: 100%;\n"]))),j=Object(s.default)(o.Icon)(i||(i=Object(c.a)(["\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 0 20px;\n  background: white;\n\n  & svg {\n    margin: 0;\n  }\n"])));t.a=function(e){var t=e.withArrow;return Object(d.jsxs)(l,{children:[t&&Object(d.jsx)(j,{type:"arrowDown",size:"md"}),Object(d.jsx)(u,{})]})}},2174:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return d}));var r,a,i=n(10),c=n(9),s=n(13),o=Object(c.default)(s.Title)(r||(r=Object(i.a)(["\n  text-align: ",";\n  margin: 24px 0;\n  color: inherit;\n  font-weight: ",";\n"])),(function(e){return e.centered?"center":"left"}),(function(e){return e.bold?"bold":"normal"})),d=Object(c.default)(s.Text)(a||(a=Object(i.a)(["\n  text-align: center;\n  color: #b2bbc0;\n  margin: 0 75px;\n"])))},2205:function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return F}));var r,a,i,c,s,o,d,l,u,j,b,p,f,O,h,x=n(10),m=n(21),g=n(88),v=n(9),y=n(3121),w=n(391),A=n(13),k=n(26),C=n(755),S=n(69),T=n(89),I=n(140),E=n(92),z=n(22),M=Object(v.keyframes)(r||(r=Object(x.a)(["\n0% {\n  background-position: 0% 54%;\n}\n50% {\n  background-position: 100% 47%;\n}\n100% {\n  background-position: 0% 54%;\n}\n"]))),R=v.default.div(a||(a=Object(x.a)(["\n  height: ",";\n  width: ",";\n  border-radius: 50%;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),(function(e){return"lg"===e.size?"112px":"50px"}),(function(e){return"lg"===e.size?"112px":"50px"}),M),L=v.default.div(i||(i=Object(x.a)(["\n  height: 18px;\n  width: 160px;\n  margin: 8px 0;\n\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),M),P=v.default.div(c||(c=Object(x.a)(["\n  height: 12px;\n  width: 240px;\n  margin: 2px 0;\n\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),M),D=n(5),N=n(71),B=n(0),U=(t.c=function(e){var t=e.safeApp,n=e.size,r=e.togglePin,a=e.isPinned,i=e.isCustomSafeApp,c=e.onRemove,s=Object(m.d)(S.a),o=Object(m.c)(),d=Object(N.a)().safeAddress,l=Object(k.p)(k.i.APPS,{shortName:Object(z.q)(),safeAddress:d}),u="".concat(l,"?appUrl=").concat(encodeURI(t.url));return t.fetchStatus===E.a.LOADING?Object(B.jsx)(q,{size:n,children:Object(B.jsxs)(G,{size:n,children:[Object(B.jsx)(W,{size:n,children:Object(B.jsx)(R,{size:n})}),Object(B.jsxs)(K,{size:n,children:[Object(B.jsx)(L,{}),Object(B.jsx)(P,{}),Object(B.jsx)(P,{})]})]})}):Object(B.jsx)(q,{size:n,children:Object(B.jsx)(H,{to:u,"aria-label":"open ".concat(t.name," Safe App"),children:Object(B.jsxs)(G,{size:n,children:[Object(B.jsx)(W,{size:n,children:Object(B.jsx)(V,{size:n,src:t.iconUrl,alt:"".concat(t.name||"Safe App"," Logo"),onError:U})}),Object(B.jsxs)(K,{size:n,children:[Object(B.jsx)(J,{size:"xs",children:t.name}),Object(B.jsx)(X,{size:"lg",color:"inputFilled",children:t.description})]}),Object(B.jsxs)(Y,{onClick:function(e){return e.preventDefault()},children:[Object(B.jsx)($,{onClick:function(){!function(e){var t,n,r,a,i=document.createRange();function c(t){var n;null===(n=t.clipboardData)||void 0===n||n.setData("text/plain",e),t.preventDefault()}i.selectNodeContents(document.body),null===(t=document)||void 0===t||null===(n=t.getSelection())||void 0===n||n.addRange(i),document.addEventListener("copy",c),document.execCommand("copy"),document.removeEventListener("copy",c),null===(r=document)||void 0===r||null===(a=r.getSelection())||void 0===a||a.removeAllRanges()}(Object(k.t)(t.url,s)),o(Object(T.h)(I.a.SHARE_SAFE_APP_URL_COPIED))},"aria-label":"copy ".concat(t.name," Safe App share link to clipboard"),children:Object(B.jsx)(A.Icon,{size:"md",type:"share",tooltip:"Copy share link"})}),!i&&Object(B.jsx)($,{onClick:function(){return r(t)},"aria-label":"".concat(a?"Unpin":"Pin"," ").concat(t.name," Safe App"),children:a?Object(B.jsx)(Z,{size:"md",type:"bookmarkFilled",color:"primary",tooltip:"Unpin from the Safe Apps"}):Object(B.jsx)(Z,{size:"md",type:"bookmark",tooltip:"Pin from the Safe Apps"})}),i&&Object(B.jsx)($,{onClick:function(){return null===c||void 0===c?void 0:c(t)},"aria-label":"Remove ".concat(t.name," custom Safe App"),children:Object(B.jsx)(A.Icon,{size:"md",type:"delete",color:"error",tooltip:"Remove Custom Safe App"})})]})]})})})},function(e){e.currentTarget.onerror=null,e.currentTarget.src=C.a}),_=190,F=16,q=Object(v.default)(y.a.div).attrs({layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}})(s||(s=Object(x.a)(["\n  position: relative;\n  display: flex;\n  height: ","px;\n\n  grid-column: span ",";\n"])),_,(function(e){return"lg"===e.size?"2":"1"})),H=Object(v.default)(g.a)(o||(o=Object(x.a)(["\n  display: flex;\n  flex: 1 0;\n  height: ","px;\n  text-decoration: none;\n"])),_),G=Object(v.default)(A.Card)(d||(d=Object(x.a)(["\n  flex: 1 1 100%;\n  padding: ","px;\n  display: flex;\n  flex-direction: ",";\n  box-shadow: none;\n  border: 2px solid transparent;\n\n  transition: all 0.3s ease-in-out 0s;\n  transition-property: border-color, background-color;\n\n  :hover {\n    background-color: ",";\n    border: 2px solid ",";\n  }\n"])),F,(function(e){return"lg"===e.size?"row":"column"}),D.primary200,D.primary300),W=v.default.div(l||(l=Object(x.a)(["\n  flex: 0 0;\n  flex-basis: ",";\n\n  display: flex;\n  justify-content: ",";\n  align-items: center;\n"])),(function(e){return"lg"===e.size?"50%":"auto"}),(function(e){return"lg"===e.size?"center":"start"})),V=v.default.img(u||(u=Object(x.a)(["\n  height: ",";\n  width: ",";\n  object-fit: contain;\n"])),(function(e){return"lg"===e.size?"112px":"50px"}),(function(e){return"lg"===e.size?"112px":"50px"})),K=v.default.div(j||(j=Object(x.a)(["\n  flex: 0 0;\n\n  flex-basis: ",";\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"])),(function(e){return"lg"===e.size?"50%":"auto"})),J=Object(v.default)(A.Title)(b||(b=Object(x.a)(["\n  margin: 8px 0px;\n  font-size: 16px;\n  line-height: 22px;\n  font-weight: bold;\n  color: initial;\n"]))),X=Object(v.default)(A.Text)(p||(p=Object(x.a)(["\n  margin: 0;\n  line-height: 22px;\n\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n"]))),Y=v.default.div(f||(f=Object(x.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n\n  margin: 16px 12px;\n"]))),$=Object(v.default)(w.a)(O||(O=Object(x.a)(["\n  padding: 8px;\n\n  && svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),Z=Object(v.default)(A.Icon)(h||(h=Object(x.a)(["\n  padding-left: 2px;\n"])))},2223:function(e,t,n){"use strict";var r,a,i=n(10),c=(n(1),n(9)),s=n(13),o=n(0),d=Object(c.default)(s.Icon)(r||(r=Object(i.a)(["\n  position: relative;\n  top: 4px;\n  padding-right: 4px;\n"]))),l=Object(c.default)(s.Text)(a||(a=Object(i.a)(["\n  display: block;\n  font-size: 12px;\n  font-weight: bold;\n  overflow-wrap: anywhere;\n  background-color: #effaf8;\n  padding: 10px 15px 10px 10px;\n  border-radius: 8px;\n  max-width: 75%;\n  ","\n"])),(function(e){return e.showInOneLine&&"overflow-y: hidden;\n     white-space: nowrap;\n     "}));t.a=function(e){var t=e.url,n=e.showInOneLine;return Object(o.jsxs)(l,{size:"xl",showInOneLine:!!n,children:[Object(o.jsx)(d,{type:"check",color:"primary",size:"sm"})," ",t]})}},2238:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return j}));var r=n(17),a=n(101),i=n(16),c=n(3),s=n(264),o="APPS_DASHBOARD",d=function(){return s.a.getItem(o)||{}},l=function(e){var t,n,r=d(),a=(null===(t=r[e])||void 0===t?void 0:t.openCount)||0,l=(null===(n=r[e])||void 0===n?void 0:n.txCount)||0;s.a.setItem(o,Object(c.a)(Object(c.a)({},r),{},Object(i.a)({},e,{timestamp:Date.now(),openCount:a+1,txCount:l})))},u=function(e){var t,n=d(),r=(null===(t=n[e])||void 0===t?void 0:t.txCount)||0;s.a.setItem(o,Object(c.a)(Object(c.a)({},n),{},Object(i.a)({},e,Object(c.a)(Object(c.a)({},n[e]),{},{txCount:r+1}))))},j=function(e,t){var n,r=b(e),i=Object(a.a)(t);try{for(i.s();!(n=i.n()).done;){var c=n.value;r[c.id]?r[c.id]+=10:r[c.id]=10}}catch(s){i.e(s)}finally{i.f()}return Object.entries(r).sort((function(e,t){return t[1]-e[1]})).map((function(e){return e[0]}))},b=function(e){var t,n,i,c,s,o={},d=Object.entries(e).sort((function(e,t){return e[1].timestamp-t[1].timestamp})),l=Object(a.a)(d.entries());try{for(l.s();!(t=l.n()).done;){var u=Object(r.a)(t.value,2),j=u[0],b=u[1],p=(n=j,i=0,c=d.length,(s=1)+(n-i)*(2-s)/(c-i));o[b[0]]=(2*b[1].txCount+1*b[1].openCount)*p}}catch(f){l.e(f)}finally{l.f()}return o}},2279:function(e,t,n){"use strict";var r,a,i,c,s,o,d=n(10),l=n(17),u=n(1),j=n(614),b=n(1054),p=n(706),f=n(9),O=n(13),h=n(2174),x=n(2223),m=n(0),g=Object(f.default)(j.a)(r||(r=Object(d.a)(["\n  color: #e8663d;\n"]))),v=Object(f.default)(h.b)(a||(a=Object(d.a)(["\n  font-size: 24px;\n  margin-left: 4px;\n  margin-top: ",";\n"])),(function(e){return e.isColumnLayout?"12px":"24px"})),y=Object(f.default)(O.Text)(i||(i=Object(d.a)(["\n  color: inherit;\n  text-align: ",";\n"])),(function(e){return e.isColumnLayout?"center":"left"})),w=Object(f.default)(O.Text)(c||(c=Object(d.a)(["\n  text-align: ",";\n"])),(function(e){return e.isColumnLayout?"center":"left"})),A=Object(f.default)(O.Icon)(s||(s=Object(d.a)(["\n  svg {\n    width: ",";\n    height: ",";\n  }\n  .icon-color {\n    fill: #e8663d;\n  }\n\n  .icon-stroke {\n    stroke: #e8663d;\n  }\n"])),(function(e){return e.isColumnLayout?"32px":"24px"}),(function(e){return e.isColumnLayout?"32px":"24px"})),k=Object(f.default)(p.a)(o||(o=Object(d.a)(["\n  flex: 1;\n  color: #000;\n  .MuiIconButton-root:not(.Mui-checked) {\n    color: ",";\n  }\n"])),(function(e){return e.theme.colors.inputDisabled}));t.a=function(e){var t=e.url,n=e.onHideWarning,r=Object(u.useState)(!1),a=Object(l.a)(r,2),i=a[0],c=a[1],s=!!n;return Object(m.jsxs)(g,{display:s?"flex":"block",flexDirection:"column",height:s?"100%":"auto",alignItems:"center",children:[Object(m.jsxs)(j.a,{display:s?"block":"flex",alignItems:"center",mt:s?6:0,children:[Object(m.jsx)(A,{type:"alert",size:"md",isColumnLayout:s}),Object(m.jsx)(v,{size:"sm",bold:!0,isColumnLayout:s,children:"Warning"})]}),Object(m.jsx)(y,{isColumnLayout:s,size:"xl",children:"The application you are trying to access is not in the default Safe Apps list"}),Object(m.jsx)("br",{}),Object(m.jsx)(w,{isColumnLayout:s,size:"lg",children:"Check the link you are using and ensure that it comes from a source you trust"}),Object(m.jsx)("br",{}),t&&Object(m.jsx)(x.a,{url:t,showInOneLine:!0}),Object(m.jsx)("br",{}),n&&Object(m.jsx)(k,{control:Object(m.jsx)(b.a,{checked:i,onChange:function(){null===n||void 0===n||n(!i),c(!i)},name:"Warning message preference"}),label:"Don't show this warning again"})]})}},2335:function(e,t,n){"use strict";var r,a=n(10),i=n(9),c=n(1054),s=n(706),o=n(0),d=Object(i.default)(s.a)(r||(r=Object(a.a)(["\n  flex: 1;\n  .MuiIconButton-root:not(.Mui-checked) {\n    color: ",";\n  }\n"])),(function(e){return e.theme.colors.inputDisabled}));t.a=function(e){var t=e.label,n=e.checked,r=e.onChange,a=e.name;return Object(o.jsx)(d,{control:Object(o.jsx)(c.a,{checked:n,onChange:r,name:a}),label:t})}},3122:function(e,t,n){"use strict";n.r(t);var r,a,i,c,s,o,d,l=n(1),u=n.n(l),j=n(65),b=n(283),p=n(3),f=n(40),O=n(2),h=n.n(O),x=n(11),m=n(17),g=n(10),v=n(9),y=n(13),w=n(759),A=n(21),k=n(2507),C=n(553),S=n.n(C),T=n(56),I=n(22),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["https:","http:"];try{var n=new URL(e);return t.includes(n.protocol)}catch(r){return!1}},z=n(475),M=n(33),R=n(87),L=n(158),P=n(0),D=v.default.div(r||(r=Object(g.a)(["\n  padding: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.margin.sm," ").concat(t.margin.lg)})),N=v.default.div(a||(a=Object(g.a)(["\n  display: flex;\n  align-items: center;\n\n  span {\n    margin-right: 4px;\n  }\n"]))),B=v.default.div(i||(i=Object(g.a)(["\n  margin-top: 15px;\n"]))),U=function(e){var t=e.onTxReject,n=e.onClose,r=e.requestId;return Object(P.jsxs)(D,{children:[Object(P.jsxs)(N,{children:[Object(P.jsx)(y.Icon,{color:"error",size:"md",type:"info"}),Object(P.jsx)(y.Title,{size:"xs",children:"Transaction error"})]}),Object(P.jsx)(y.Text,{size:"lg",children:"This Safe App initiated a transaction which cannot be processed. Please get in touch with the developer of this Safe App for more information."}),Object(P.jsx)(B,{children:Object(P.jsx)(y.ModalFooterConfirmation,{cancelText:"Cancel",handleCancel:function(){return t(r),void n()},handleOk:function(){},okDisabled:!0,okText:"Submit"})})]})},_=n(30),F=n(72),q=n(466),H=n(111),G=n(91),W=n(195),V=n(271),K=n(5),J=n(804),X=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===t||void 0===t?void 0:t.length)&&"0x"!==t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,Object(_.getDecodedData)(Object(I.b)(),t);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),Y=n(164),$=n(156),Z=n(166),Q=n(2113),ee=n(90),te=n(104),ne=n(467),re=n(59),ae=n(81),ie=n(2238),ce=v.default.div(c||(c=Object(g.a)(["\n  max-width: 480px;\n  padding: "," "," 0;\n"])),K.md,K.lg),se=v.default.div(s||(s=Object(g.a)(["\n  margin: 0;\n"]))),oe=Object(v.default)($.a)(o||(o=Object(g.a)(["\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  border-radius: 3px;\n  margin: 4px 0 0 40px;\n\n  display: flex;\n\n  > :nth-child(1) {\n    margin-right: 5px;\n  }\n"])),(function(e){return e.theme.colors.separator})),de=function(e){var t,n=e.app,r=e.txs,a=e.params,i=e.safeAddress,c=e.ethBalance,s=e.safeName,o=e.onUserConfirm,d=e.onClose,u=e.onReject,j=e.requestId,b=e.appId,p=r.length>1,f=Object(l.useState)(),O=Object(m.a)(f,2),g=O[0],v=O[1],w=Object(A.c)(),k=Object(I.m)(),C=Object(I.i)(i),S=Object(A.d)(te.b),T=Object(l.useMemo)((function(){var e;return p?Object(H.g)():null===(e=r[0])||void 0===e?void 0:e.to}),[r,p]),E=Object(l.useMemo)((function(){var e;return p?Object(W.a)(r):null===(e=r[0])||void 0===e?void 0:e.data}),[r,p]),z=Object(l.useMemo)((function(){var e,t;return p?"0":(t=null===(e=r[0])||void 0===e?void 0:e.value,Object(F.toBN)(t).toString())}),[r,p]),M=Object(l.useMemo)((function(){return p?_.Operation.DELEGATE:_.Operation.CALL}),[p]);Object(l.useEffect)((function(){var e=!0,t=function(){var t=Object(x.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X(E);case 2:(n=t.sent)&&e&&v(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}}),[E]);var R=function(e){o(e,j),d()};return Object(P.jsx)(ne.a,{txTo:T,txData:E,txValue:z,operation:M,onSubmit:function(e,t){Object(ie.d)(b),w(Object(q.b)({safeAddress:i,to:T,valueInWei:z,txData:E,operation:M,origin:n.id,navigateToTransactionsTab:!1,txNonce:e.safeNonce,safeTxGas:e.safeTxGas,ethParameters:e,notifiedTransaction:G.a.STANDARD_TX,delayExecution:t},R,u))},isSubmitDisabled:!S,onBack:u,safeTxGas:null===a||void 0===a||null===(t=a.safeTxGas)||void 0===t?void 0:t.toString(),children:Object(P.jsxs)("div",{children:[Object(P.jsx)(V.a,{title:n.name,iconUrl:n.iconUrl,onClose:u}),Object(P.jsx)(Z.a,{}),Object(P.jsxs)(ce,{children:[Object(P.jsx)(ae.a,{margin:"xs",children:Object(P.jsx)(re.a,{color:"disabled",noMargin:!0,size:"lg",children:"Sending from"})}),Object(P.jsx)(ee.a,{name:s,hash:i,strongName:!0,showAvatar:!0,showCopyBtn:!0,explorerUrl:C}),Object(P.jsxs)(oe,{children:[Object(P.jsx)(y.Text,{size:"md",children:"Balance:"}),Object(P.jsx)(y.Text,{size:"md",strong:!0,children:"".concat(c," ").concat(k.symbol)})]}),Object(P.jsx)(Q.a,{withArrow:!0}),Object(P.jsx)(J.a,{txRecipient:T,txData:E,txValue:Object(Y.a)(z,k.decimals)}),r.length>0&&Object(P.jsx)(se,{children:Object(P.jsx)(J.b,{txs:r,decodedData:g})})]})]})})},le=function(e){return!e.txs.length||e.txs.some((function(e){return!function(e){return!!["string","number"].includes(typeof e.value)&&!("string"===typeof e.value&&!/^(0x)?[0-9a-f]+$/i.test(e.value))&&void 0===Object(L.k)(e.to)&&!!e.data&&"string"===typeof e.data}(e)}))?Object(P.jsx)(R.c,{description:"Safe App transaction",title:"Safe App transaction",open:e.isOpen,children:Object(P.jsx)(U,Object(p.a)({},e))}):Object(P.jsx)(R.c,{description:"Safe App transaction",title:"Safe App transaction",open:e.isOpen,children:Object(P.jsx)(de,Object(p.a)(Object(p.a)({},e),{},{onReject:function(){e.onClose(),e.onTxReject(e.requestId)}}))})},ue=n(152),je="https://third-party-cookies-check.gnosis-safe.com",be=function(){var e=Object(l.useRef)(),t=Object(l.useState)(!1),n=Object(m.a)(t,2),r=n[0],a=n[1],i=Object(l.useCallback)((function(t){var n=t.data;try{n.hasOwnProperty("isCookieEnabled")&&(a(!n.isCookieEnabled),window.removeEventListener("message",i),document.body.removeChild(e.current))}catch(r){console.error(r)}}),[]);return Object(l.useEffect)((function(){if(!(navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<=-1)){window.addEventListener("message",i);var t=function(e,t){var n=document.createElement("iframe");return n.src=e,n.setAttribute("style","display:none"),n.onload=t,n}(je,(function(){var e;return null===t||void 0===t||null===(e=t.contentWindow)||void 0===e?void 0:e.postMessage({test:"cookie"},"*")}));e.current=t,document.body.appendChild(t)}}),[i]),Object(l.useEffect)((function(){var e;return r&&(e=setTimeout((function(){return a(!1)}),1e4)),function(){return clearTimeout(e)}}),[r]),{thirdPartyCookiesDisabled:r,setThirdPartyCookiesDisabled:a}},pe=n(28),fe=n(590),Oe=n(7),he=n(29);!function(e){e.getEnvInfo="getEnvInfo"}(d||(d={}));var xe,me,ge,ve,ye,we,Ae,ke,Ce,Se,Te,Ie,Ee,ze,Me,Re,Le,Pe,De,Ne,Be,Ue,_e,Fe,qe,He,Ge,We,Ve,Ke,Je,Xe,Ye,$e,Ze,Qe,et,tt,nt,rt,at,it,ct,st,ot,dt,lt,ut,jt,bt,pt,ft,Ot,ht,xt,mt,gt,vt,yt=function e(t,n){var r=this;Object(Oe.a)(this,e),this.iframeRef=void 0,this.handlers=new Map,this.app=void 0,this.on=function(e,t){r.handlers.set(e,t)},this.isValidMessage=function(e){var t;if(e.data.hasOwnProperty("isCookieEnabled"))return!0;var n=(null===(t=r.iframeRef.current)||void 0===t?void 0:t.contentWindow)===e.source,a=Object.values(w.Methods).includes(e.data.method);return n&&a},this.canHandleMessage=function(e){return Boolean(r.handlers.get(e.data.method))},this.send=function(e,t){var n,a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=Object(w.getSDKVersion)(),s=i?w.MessageFormatter.makeErrorResponse(t,e,c):w.MessageFormatter.makeResponse(t,e,c);null===(n=r.iframeRef.current)||void 0===n||null===(a=n.contentWindow)||void 0===a||a.postMessage(s,"*")},this.handleIncomingMessage=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,a,i,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.isValidMessage(t),a=r.canHandleMessage(t),!n||!a){e.next=16;break}return Object(pe.e)({app:r.app,method:t.data.method,params:t.data.params,sdkVersion:t.data.env.sdkVersion}),i=r.handlers.get(t.data.method),e.prev=5,e.next=8,i(t);case 8:"undefined"!==typeof(c=e.sent)&&r.send(c,t.data.id),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),r.send(e.t0.message,t.data.id,!0),Object(he.c)(he.b._901,e.t0.message,{contexts:{safeApp:r.app,request:t.data}});case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),this.clear=function(){window.removeEventListener("message",r.handleIncomingMessage)},this.iframeRef=t,this.app=n,window.addEventListener("message",this.handleIncomingMessage)},wt=n(210),At=n(2222),kt=n(521),Ct=n(179),St={isOpen:!1,message:"",requestId:"",method:w.Methods.signMessage},Tt=n(34),It=n(46),Et=n(702),zt=n(391),Mt=n(233),Rt=n.n(Mt),Lt=Object(v.default)(re.a)(xe||(xe=Object(g.a)(["\n  && {\n    font-size: ",";\n    white-space: nowrap;\n    max-width: 370px;\n    overflow: hidden;\n  }\n"])),K.lg),Pt=v.default.img(me||(me=Object(g.a)(["\n  width: 20px;\n  margin-right: 10px;\n"]))),Dt=v.default.div(ge||(ge=Object(g.a)(["\n  display: flex;\n  align-items: center;\n"]))),Nt=Object(v.default)(ae.a)(ve||(ve=Object(g.a)(["\n  padding: "," ",";\n  justify-content: space-between;\n  box-sizing: border-box;\n  max-height: 75px;\n"])),K.md,K.lg),Bt=Object(v.default)(Rt.a)(ye||(ye=Object(g.a)(["\n  height: 35px;\n  width: 35px;\n"]))),Ut=v.default.div(we||(we=Object(g.a)(["\n  margin-right: 15px;\n"]))),_t=function(e){var t=e.goBack,n=e.iconUrl,r=e.title,a=e.onClose;return Object(P.jsxs)(Nt,{align:"center",grow:!0,children:[Object(P.jsxs)(Dt,{children:[t&&Object(P.jsx)(Ut,{children:Object(P.jsx)(zt.a,{onClick:t,children:Object(P.jsx)(y.Icon,{type:"arrowLeft",size:"md"})})}),n&&Object(P.jsx)(Pt,{alt:r,src:n}),Object(P.jsx)(Lt,{noMargin:!0,weight:"bolder",title:r,children:r})]}),Object(P.jsx)(zt.a,{disableRipple:!0,onClick:a,children:Object(P.jsx)(Bt,{})})]})},Ft=v.default.div(Ae||(Ae=Object(g.a)(["\n  max-width: 480px;\n  padding: "," "," 0;\n"])),K.md,K.lg),qt=Object(v.default)($.a)(ke||(ke=Object(g.a)(["\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  border-radius: 3px;\n  margin: 4px 0 0 40px;\n\n  display: flex;\n\n  > :nth-child(1) {\n    margin-right: 5px;\n  }\n"])),(function(e){return e.theme.colors.separator})),Ht=Object(v.default)(Et.a)(Ce||(Ce=Object(g.a)(["\n  &.MuiFormControl-root {\n    padding-bottom: ",";\n  }\n"])),(function(e){return e.theme.margin.md})),Gt=Object(v.default)(re.a)(Se||(Se=Object(g.a)(["\n  display: flex;\n  align-items: center;\n\n  > span:first-child {\n    margin-right: ",";\n  }\n"])),(function(e){return e.theme.margin.xs})),Wt=function(e){var t=e.app,n=e.safeAddress,r=e.ethBalance,a=e.safeName,i=e.onUserConfirm,c=e.onClose,s=e.onTxReject,o=e.requestId,d=e.method,l=e.utf8Message,u=e.txData,j=e.txRecipient,b=Object(A.c)(),p=Object(I.i)(n),f=Object(I.m)(),O=Object(A.d)(te.b),h=function(){s(o),c()},x=function(e){i(e,o),c()};return Object(P.jsxs)(ne.a,{txData:u,txTo:j,onSubmit:function(e,r){b(Object(q.b)({safeAddress:n,to:j,valueInWei:"0",txData:u,operation:_.Operation.DELEGATE,origin:t.id,navigateToTransactionsTab:!1,txNonce:e.safeNonce,safeTxGas:e.safeTxGas,ethParameters:e,notifiedTransaction:G.a.STANDARD_TX,delayExecution:r},x,h))},onClose:h,operation:_.Operation.DELEGATE,isSubmitDisabled:!O,children:[Object(P.jsx)(_t,{title:t.name,iconUrl:t.iconUrl,onClose:h}),Object(P.jsx)(Z.a,{}),Object(P.jsxs)(Ft,{children:[Object(P.jsx)(ee.a,{name:a,hash:n,strongName:!0,showAvatar:!0,showCopyBtn:!0,explorerUrl:p}),Object(P.jsxs)(qt,{children:[Object(P.jsx)(y.Text,{size:"md",children:"Balance:"}),Object(P.jsx)(y.Text,{size:"md",strong:!0,children:"".concat(r," ").concat(f.symbol)})]}),Object(P.jsx)(Q.a,{withArrow:!0}),Object(P.jsx)(J.a,{txRecipient:j,txData:u,txValue:"0",signMethod:d.toString(),recipientName:"SignMessageLib"}),Object(P.jsx)(y.Text,{size:"lg",strong:!0,children:"Signing message:"}),Object(P.jsx)(Ht,{rows:"2",multiline:!0,disabled:!0,fullWidth:!0,label:"Message to sign",inputProps:{type:"text",value:l,name:"Message to sign",onChange:function(){},placeholder:""},InputProps:{disableUnderline:!0}}),Object(P.jsxs)(Gt,{children:[Object(P.jsx)(y.Icon,{size:"md",type:"info",color:"warning"}),"Signing a message with the Safe requires a transaction on the blockchain"]})]})]})},Vt=n(69),Kt=n(2085),Jt=["message","isOpen","method"],Xt=function(e){var t,n,r=e.message,a=e.isOpen,i=e.method,c=Object(f.a)(e,Jt),s=Object(Tt.g)(),o=Object(A.d)(Vt.a),d=Object(H.l)(o)||It.a;if(i==w.Methods.signMessage&&"string"===typeof r)t=Object(H.m)(s,o).methods.signMessage(s.eth.accounts.hashMessage(r)).encodeABI(),n=function(e){var t=Object(F.isHexStrict)(e.toString()),n=e;if(t)try{n=Object(F.hexToUtf8)(e)}catch(r){}return n}(r);else if(i==w.Methods.signTypedMessage){try{if(!Object(w.isObjectEIP712TypedData)(r))throw new Error("Invalid typed data");n=JSON.stringify(r,void 0,4)}catch(u){return c.onTxReject(c.requestId),c.onClose(),null}var l=Object(p.a)({},r.types);delete l.EIP712Domain,t=Object(H.m)(s,o).methods.signMessage(Kt.a.hash(r.domain,l,r.message)).encodeABI()}else c.onTxReject(c.requestId),c.onClose();return Object(P.jsx)(R.c,{description:"Safe App transaction",title:"Safe App transaction",open:a,children:Object(P.jsx)(Wt,Object(p.a)(Object(p.a)({},c),{},{txRecipient:d,method:i,txData:t,utf8Message:n}))})},Yt=n(2086),$t=n(2080),Zt=function(e){var t=e.onClose;return Object(P.jsx)(Yt.a,{severity:"warning",onClose:t,children:Object(P.jsxs)($t.a,{children:["Third party cookies are disabled. Safe Apps may therefore not work properly. You can find out more information about this"," ",Object(P.jsx)(y.Link,{href:"https://help.gnosis-safe.io/en/articles/5955031-why-do-i-need-to-enable-third-party-cookies-for-safe-apps",size:"xl",target:"_blank",children:"here"})]})})},Qt=n(78),en=n(1061),tn=n(2077),nn=n(592),rn=v.default.div(Te||(Te=Object(g.a)(["\n  .modal-body {\n    min-height: auto;\n  }\n\n  .modal-footer {\n    border-top: 0;\n  }\n"]))),an=function(e){var t=e.origin,n=e.isOpen,r=e.requestId,a=e.permissions,i=e.onReject,c=e.onAccept;return Object(P.jsx)(R.b,{description:"Requested permissions",handleClose:i,open:n,title:"Requested permissions",style:{top:"25%"},children:Object(P.jsxs)(rn,{children:[Object(P.jsx)(R.b.Header,{onClose:i,children:Object(P.jsx)(R.b.Header.Title,{children:"Permissions Request"})}),Object(P.jsx)(tn.a,{}),Object(P.jsxs)(R.b.Body,{children:[Object(P.jsxs)(y.Text,{size:"xl",children:[Object(P.jsx)("b",{children:t})," is requesting permissions for:"]}),Object(P.jsx)("ul",{children:a.map((function(e,t){return Object(P.jsx)("li",{children:Object(P.jsx)(y.Text,{size:"xl",children:nn.b[Object.keys(e)[0]].description})},t)}))})]}),Object(P.jsx)(R.b.Footer,{children:Object(P.jsx)(R.b.Footer.Buttons,{cancelButtonProps:{text:"Reject",color:"error",variant:"contained",onClick:function(){return i(r)}},confirmButtonProps:{text:"Accept",color:"primary",onClick:function(){return c(t,r)}}})})]})})},cn=function(e){var t=Object(l.useState)((function(){return Object(ue.g)(e)})),n=Object(m.a)(t,2),r=n[0],a=n[1],i=Object(l.useState)(!1),c=Object(m.a)(i,2),s=c[0],o=c[1];return Object(l.useEffect)((function(){if(e){var t=function(){var t=Object(x.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o(!0),t.prev=1,t.next=4,Object(ue.f)(e);case 4:n=t.sent,a(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Object(he.c)(he.b._900,"".concat(e,", ").concat(t.t0.message));case 11:return t.prev=11,o(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e]),{safeApp:r,isLoading:s}},sn=["to"],on=v.default.div(Ie||(Ie=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  height: calc(100% + 16px);\n  margin: -8px -24px;\n"]))),dn=Object(v.default)(y.Card)(Ee||(Ee=Object(g.a)(["\n  flex-grow: 1;\n  padding: 0;\n  border-radius: 0;\n"]))),ln=v.default.iframe(ze||(ze=Object(g.a)(["\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  box-sizing: border-box;\n  display: ",";\n"])),(function(e){return e.isLoading?"none":"block"})),un={isOpen:!1,txs:[],requestId:"",params:void 0},jn=function(e){var t=e.appUrl,n=e.allowedFeaturesList,r=Object(A.d)(T.a),a=r.address,i=r.ethBalance,c=r.owners,s=r.threshold,o=Object(I.e)(),u=o.nativeCurrency,j=o.chainId,b=o.chainName,O=o.shortName,g=o.blockExplorerUriTemplate,v=Object(A.d)((function(e){return Object(Ct.a)(e,{address:a})})),C=Object(A.d)(te.b),E=Object(A.d)(Ct.d),R=Object(l.useRef)(null),L=Object(l.useState)(un),D=Object(m.a)(L,2),N=D[0],B=D[1],U=Object(l.useState)(!0),_=Object(m.a)(U,2),F=_[0],q=_[1],H=function(){var e=Object(l.useState)(St),t=Object(m.a)(e,2),n=t[0],r=t[1];return[n,Object(l.useCallback)((function(e,t,n){r(Object(p.a)(Object(p.a)({},St),{},{isOpen:!0,message:e,requestId:t,method:n}))}),[]),Object(l.useCallback)((function(){r(St)}),[])]}(),G=Object(m.a)(H,3),W=G[0],V=G[1],K=G[2],J=Object(l.useRef)(),X=Object(l.useState)(!1),Y=Object(m.a)(X,2),$=Y[0],Z=Y[1],Q=Object(l.useRef)(),ee=Object(l.useState)(!1),ne=Object(m.a)(ee,2)[1],re=be(),ae=re.thirdPartyCookiesDisabled,ce=re.setThirdPartyCookiesDisabled,se=Object(en.a)().remoteSafeApps.filter((function(e){return e.url===t}))[0],oe=Object(nn.d)(),de=oe.confirmPermissionRequest,Oe=oe.permissionsRequest,he=oe.setPermissionsRequest,xe=oe.getPermissions,me=oe.hasPermission,ge=Object(I.p)(),ve=Object(l.useMemo)((function(){return new S.a.providers.HttpProvider(ge,Tt.o)}),[ge]),ye=cn(t).safeApp;Object(l.useEffect)((function(){var e=function(){clearTimeout(J.current),clearTimeout(Q.current)};return F?(J.current=window.setTimeout((function(){Z(!0)}),M.w),Q.current=window.setTimeout((function(){ne((function(){throw Error("There was an error loading the Safe App. There might be a problem with the App provider.")}))}),3e4)):(e(),Z(!1)),function(){e()}}),[F]),Object(l.useEffect)((function(){se&&Object(ie.c)(se.id)}),[se]);var we=Object(l.useCallback)((function(e,t,n){return B({isOpen:!0,txs:e,requestId:n,params:t})}),[B]),Ae=Object(l.useCallback)((function(){return B(un)}),[B]),ke=function(e,t,n,r){var a=Object(A.d)(T.i),i=a.address,c=a.ethBalance,s=a.name,o=Object(A.c)(),d=Object(I.e)(),u=d.chainId,j=d.chainName,b=Object(l.useCallback)((function(t,n){var a,i,c=Object(p.a)(Object(p.a)({},t),{},{requestId:n||Math.trunc(window.performance.now()),version:"0.4.2"});r&&e&&(null===(a=r.current)||void 0===a||null===(i=a.contentWindow)||void 0===i||i.postMessage(c,e.url))}),[r,e]);return Object(l.useEffect)((function(){var n=function(n,r,a){if(n)switch(Object(pe.d)(Object(p.a)(Object(p.a)({},fe.a.LEGACY_API_CALL),{},{label:"".concat(Object(pe.b)(e),"-").concat(n)})),n){case k.SDK_MESSAGES.SEND_TRANSACTIONS:r&&t(r,void 0,a);break;case k.SDK_MESSAGES.SAFE_APP_SDK_INITIALIZED:var s={messageId:k.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:i,network:Object(ue.i)(j,u).toLowerCase(),ethBalance:c}},o={messageId:k.INTERFACE_MESSAGES.ENV_INFO,data:{txServiceUrl:Object(I.r)()}};b(s),b(o);break;default:console.error("ThirdPartyApp: A message was received with an unknown message id ".concat(n,"."))}},r=function(){var t=Object(x.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.origin!==window.origin&&r.origin!==je){t.next=2;break}return t.abrupt("return");case 2:if(null===e||void 0===e?void 0:e.url.includes(r.origin)){t.next=5;break}return console.error("ThirdPartyApp: A message was received from an unknown origin ".concat(r.origin)),t.abrupt("return");case 5:n(r.data.messageId,r.data.data,r.data.requestId);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return window.addEventListener("message",r),function(){window.removeEventListener("message",r)}}),[j,u,n,o,c,t,i,s,e,b]),{sendMessageToIframe:b}}(ye,we,Ae,R),Ce=ke.sendMessageToIframe,Se=Object(l.useCallback)((function(){var e=R.current;e&&function(e,t){try{var n=new URL(e),r=new URL(t);return n.href===r.href}catch(a){return!1}}(e.src,t)&&(q(!1),Ce({messageId:k.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:a,network:Object(ue.i)(b,j).toLowerCase(),ethBalance:i}}))}),[b,j,i,a,t,Ce]),Te=function(e,t){var n=Object(l.useState)(void 0),r=Object(m.a)(n,2),a=r[0],i=r[1];return Object(l.useEffect)((function(){var n;return t&&function(e,t){n=new yt(e,t),i(n)}(e,t),function(){var e;null===(e=n)||void 0===e||e.clear()}}),[t,e]),a}(R,ye);Object(l.useEffect)((function(){null===Te||void 0===Te||Te.on(d.getEnvInfo,(function(){return{txServiceUrl:Object(I.r)()}})),null===Te||void 0===Te||Te.on(w.Methods.getTxBySafeTxHash,function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,r=n.safeTxHash,e.next=3,Object(kt.a)(r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===Te||void 0===Te||Te.on(w.Methods.getEnvironmentInfo,Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{origin:document.location.origin});case 1:case"end":return e.stop()}}),e)})))),null===Te||void 0===Te||Te.on(w.Methods.getSafeInfo,(function(){return{safeAddress:a,network:Object(ue.i)(b,j).toUpperCase(),chainId:parseInt(j,10),owners:c,threshold:s,isReadOnly:!C}})),null===Te||void 0===Te||Te.on(w.Methods.getSafeBalances,function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,i,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,r=n.currency,i=void 0===r?"usd":r,e.next=3,Object(At.a)({safeAddress:a,selectedCurrency:i});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===Te||void 0===Te||Te.on(w.Methods.wallet_getPermissions,(function(e){return xe(e.origin)})),null===Te||void 0===Te||Te.on(w.Methods.wallet_requestPermissions,function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:he({origin:t.origin,request:t.data.params,requestId:t.data.id});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===Te||void 0===Te||Te.on(w.Methods.requestAddressBook,function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!me(t.origin,w.Methods.requestAddressBook)){e.next=2;break}return e.abrupt("return",E);case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===Te||void 0===Te||Te.on(w.Methods.rpcCall,function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,e.prev=1,r=new Promise((function(e,t){ve.send({jsonrpc:"2.0",method:n.call,params:n.params,id:"1"},(function(n,r){(n||(null===r||void 0===r?void 0:r.error))&&t(n||(null===r||void 0===r?void 0:r.error)),e(null===r||void 0===r?void 0:r.result)}))})),e.abrupt("return",r);case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),null===Te||void 0===Te||Te.on(w.Methods.sendTransactions,(function(e){var t=e.data.params.txs.map((function(e){var t=e.to,n=Object(f.a)(e,sn);return Object(p.a)({to:Object(Qt.a)(t)},n)}));we(t,e.data.params.params,e.data.id)})),null===Te||void 0===Te||Te.on(w.Methods.signMessage,function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data.params,r=n.message,V(r,t.data.id,w.Methods.signMessage);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===Te||void 0===Te||Te.on(w.Methods.signTypedMessage,function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data.params,r=n.typedData,V(r,t.data.id,w.Methods.signTypedMessage);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===Te||void 0===Te||Te.on(w.Methods.getChainInfo,Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{chainName:b,chainId:j,shortName:O,nativeCurrency:u,blockExplorerUriTemplate:g});case 1:case"end":return e.stop()}}),e)}))))}),[Te,we,a,c,s,V,u,j,b,O,ve,C,g,E,xe,he,me]);var Ie=function(e,t){Ce({messageId:k.INTERFACE_MESSAGES.TRANSACTION_CONFIRMED,data:{safeTxHash:e}},N.requestId),null===Te||void 0===Te||Te.send({safeTxHash:e},t),Object(pe.d)(Object(p.a)(Object(p.a)({},fe.a.TRANSACTION_CONFIRMED),{},{label:ye.name}))},Ee=function(e){Ce({messageId:k.INTERFACE_MESSAGES.TRANSACTION_REJECTED,data:{}},N.requestId),null===Te||void 0===Te||Te.send("Transaction was rejected",e,!0),Object(pe.d)(Object(p.a)(Object(p.a)({},fe.a.TRANSACTION_REJECTED),{},{label:ye.name}))};return Object(l.useEffect)((function(){if(!t)throw Error("App url No provided or it is invalid.")}),[t]),Object(l.useEffect)((function(){ye&&ye.name!==ue.b&&Object(pe.d)(Object(p.a)(Object(p.a)({},fe.a.OPEN_APP),{},{label:ye.name}))}),[ye]),Object(P.jsxs)(on,{children:[ae&&Object(P.jsx)(Zt,{onClose:function(){return ce(!1)}}),Object(P.jsxs)(dn,{children:[F&&Object(P.jsxs)(z.a,{style:{flexDirection:"column"},children:[$&&Object(P.jsx)(y.Title,{size:"xs",children:"The Safe App is taking too long to load, consider refreshing."}),Object(P.jsx)(y.Loader,{size:"md"})]}),Object(P.jsx)(ln,{isLoading:F,frameBorder:"0",id:"iframe-".concat(t),ref:R,src:t,title:ye.name,onLoad:Se,allow:n})]}),Object(P.jsx)(le,{isOpen:N.isOpen,app:ye,safeAddress:a,ethBalance:i,safeName:v,txs:N.txs,onClose:Ae,requestId:N.requestId,onUserConfirm:Ie,params:N.params,onTxReject:Ee,appId:null===se||void 0===se?void 0:se.id}),Object(P.jsx)(Xt,{isOpen:W.isOpen,app:ye,safeAddress:a,ethBalance:i,safeName:v,onClose:K,requestId:W.requestId,message:W.message,method:W.method,onUserConfirm:Ie,onTxReject:Ee}),Oe&&Object(P.jsx)(an,{isOpen:!0,origin:Oe.origin,requestId:Oe.requestId,onAccept:function(e,t){var n=de(wt.b.GRANTED);null===Te||void 0===Te||Te.send(n,t)},onReject:function(e){e?(de(wt.b.DENIED),null===Te||void 0===Te||Te.send("Permissions were rejected",e,!0)):he(void 0)},permissions:Oe.request})]})},bn=n(3121),pn=n(3138),fn=n(1043),On=n(157),hn=n(557),xn=n.p+"static/media/addApp.71634f09.svg",mn=n(703),gn=n(2193),vn=n.n(gn),yn=n(3088),wn=n.n(yn),An=Object(v.default)(y.Card)(Me||(Me=Object(g.a)(["\n  width: 100%;\n  box-sizing: border-box;\n"]))),kn=function(e){var t=e.value,n=e.onValueChange;return Object(P.jsx)(An,{children:Object(P.jsx)(mn.a,{inputProps:{"aria-label":"search"},startAdornment:Object(P.jsx)(vn.a,{}),endAdornment:t&&Object(P.jsx)(zt.a,{"aria-label":"Clear the search",onClick:function(){return n("")},children:Object(P.jsx)(wn.a,{})}),onChange:function(e){return n(e.target.value)},placeholder:"e.g. Compound",value:t,style:{width:"100%"},onBlur:function(){t&&Object(pe.d)(Object(p.a)(Object(p.a)({},fe.a.SEARCH),{},{label:t}))}})})},Cn=v.default.div(Re||(Re=Object(g.a)(["\n  max-width: 650px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: ",";\n  margin-bottom: ",";\n\n  & > p {\n    text-align: center;\n  }\n"])),(function(e){return e.theme.margin.xxl}),(function(e){return e.theme.margin.xxl})),Sn=Object(v.default)(y.Button)(Le||(Le=Object(g.a)(["\n  margin-top: ",";\n  max-width: 300px;\n"])),(function(e){return e.theme.margin.md})),Tn=function(e){var t=e.query,n=e.onWalletConnectSearch;return Object(P.jsxs)(Cn,{children:[Object(P.jsxs)(y.Text,{size:"xl",children:["No apps found matching ",Object(P.jsx)("b",{children:t}),". Connect to dApps that haven't yet been integrated with the Safe using the WalletConnect App."]}),Object(P.jsx)(Sn,{onClick:n,size:"md",children:"Search WalletConnect"})]})},In=n(740),En=n(126),zn=n(253),Mn=n(254),Rn=Object(v.default)(y.Checkbox)(Pe||(Pe=Object(g.a)(["\n  margin: 0;\n"]))),Ln=function(){var e=Object(zn.e)({subscription:{visited:!0}}).visited,t=(null===e||void 0===e?void 0:e.agreementAccepted)?L.p:void 0;return Object(P.jsx)(Mn.a,{component:Rn,label:Object(P.jsx)(y.Text,{size:"xl",children:"This app is not part of the Safe and I agree to use this app at my own risk."}),name:"agreementAccepted",type:"checkbox",validate:t})},Pn=n(1033),Dn=n(1035),Nn=function(e){return E(e)?void 0:"Invalid URL"},Bn=Object(Pn.a)({field:"appUrl",updates:{appUrl:function(){var e=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!E(t)&&Object(It.e)(t),!e.t0){e.next=5;break}return e.next=4,Object(ue.h)(t);case 4:e.t0=e.sent;case 5:if(!(n=e.t0)){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),Un=function(e){var t=e.onAppInfo,n=e.onLoading,r=e.onError,a=Object(zn.c)("appUrl",{subscription:{value:!0}}).input.value,i=Object(Dn.a)(a,500);return Object(l.useEffect)((function(){var e=function(){var e=Object(x.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,Object(ue.f)(i);case 4:a=e.sent,t(Object(p.a)({},a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),null===r||void 0===r||r(e.t0);case 11:n(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();E(i)&&e()}),[i,t,r,n]),null},_n=Object(v.default)(Mn.a)(De||(De=Object(g.a)(["\n  && {\n    width: 100%;\n  }\n"]))),Fn=function(e){var t=e.appList,n=Object(zn.e)({subscription:{visited:!0}}).visited,r=(null===n||void 0===n?void 0:n.appUrl)?Object(L.d)(L.p,Nn,Object(ue.l)(t)):void 0;return Object(P.jsx)(_n,{label:"App URL",name:"appUrl",placeholder:"App URL",type:"text",component:y.TextField,validate:r,autoComplete:"off"})},qn=function(e){var t=e.appInfo,n=e.onCancel,r=Object(zn.e)({subscription:{valid:!0,validating:!0,visited:!0}}),a=r.valid,i=r.validating,c=r.visited,s=Object(l.useMemo)((function(){var e=(null===c||void 0===c?void 0:c.agreementAccepted)&&(null===c||void 0===c?void 0:c.appUrl);return i||!a||!e||!Object(ue.j)(t)}),[i,a,c,t]);return Object(P.jsx)(R.b.Footer.Buttons,{cancelButtonProps:{onClick:n},confirmButtonProps:{disabled:s,text:"Add"}})},Hn=n(26),Gn=Object(v.default)(y.TextField)(Ne||(Ne=Object(g.a)(["\n  && {\n    width: 385px;\n    .MuiFormLabel-root {\n      &.Mui-disabled {\n        color: rgba(0, 0, 0, 0.54);\n        &.Mui-error {\n          color: ",";\n        }\n      }\n    }\n    .MuiInputBase-root {\n      .MuiFilledInput-input {\n        color: rgba(0, 0, 0, 0.54);\n      }\n      &:before {\n        border-bottom-style: inset;\n      }\n    }\n  }\n"])),(function(e){return e.theme.colors.error})),Wn=v.default.div(Be||(Be=Object(g.a)(["\n  display: flex;\n  margin: 36px 0 24px 0;\n\n  img {\n    margin-right: 10px;\n  }\n"]))),Vn=Object(v.default)(y.Link)(Ue||(Ue=Object(g.a)(["\n  inline-size: fit-content;\n"]))),Kn=v.default.div(_e||(_e=Object(g.a)(["\n  display: flex;\n  margin-bottom: 24px;\n  flex-direction: column;\n  svg {\n    position: relative;\n    top: 4px;\n    left: 4px;\n  }\n"]))),Jn=v.default.div(Fe||(Fe=Object(g.a)(["\n  height: 55px;\n  width: 65px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Xn=Object(v.default)(y.Loader)(qe||(qe=Object(g.a)(["\n  margin-right: 15px;\n"]))),Yn={appUrl:"",agreementAccepted:!1},$n=Object(ue.g)(),Zn=function(e){var t=e.appList,n=e.closeModal,r=e.onAddApp,a=Object(l.useState)($n),i=Object(m.a)(a,2),c=i[0],s=i[1],o=Object(l.useState)(),d=Object(m.a)(o,2),u=d[0],b=d[1],p=Object(j.h)(),f=Object(l.useState)(!1),O=Object(m.a)(f,2),g=O[0],v=O[1],w=Object(l.useCallback)(Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(pe.d)(fe.a.ADD_CUSTOM_APP),r(c),p.push({pathname:Object(Hn.p)(Hn.i.APPS,Object(Hn.n)()),search:"?appUrl=".concat(encodeURIComponent(c.url))});case 3:case"end":return e.stop()}}),e)}))),[p,c,r]);Object(l.useEffect)((function(){g&&b(void 0)}),[g]);var A=Object(l.useCallback)((function(e){b(e.message),Object(he.c)(he.b._903,e.message),s($n)}),[s]);return Object(P.jsx)(In.a,{decorators:[Bn],initialValues:Yn,onSubmit:w,testId:"add-apps-form",children:function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(R.b.Body,{children:[Object(P.jsxs)(Kn,{children:[Object(P.jsx)(y.Text,{size:"xl",as:"span",color:"secondary",children:"Safe Apps are third-party extensions."}),Object(P.jsxs)(Vn,{href:"https://docs.gnosis-safe.io/build/sdks/safe-apps",target:"_blank",rel:"noreferrer",title:"Learn more about building Safe Apps",children:[Object(P.jsx)(y.Text,{size:"xl",as:"span",color:"primary",children:"Learn more about building Safe Apps."}),Object(P.jsx)(y.Icon,{size:"sm",type:"externalLink",color:"primary"})]})]}),Object(P.jsx)(Fn,{appList:t}),Object(P.jsx)(Un,{onAppInfo:s,onLoading:v,onError:A}),Object(P.jsxs)(Wn,{children:[g?Object(P.jsx)(Jn,{children:Object(P.jsx)(Xn,{size:"sm"})}):Object(P.jsx)(En.a,{alt:"Token image",width:55,src:c.iconUrl}),Object(P.jsx)(Gn,{label:"App name",disabled:!0,meta:{error:u},value:g?"Loading...":c.name===$n.name?"":c.name,onChange:function(){}})]}),Object(P.jsx)(Ln,{})]}),Object(P.jsx)(R.b.Footer,{children:Object(P.jsx)(qn,{appInfo:c,onCancel:n})})]})}})},Qn=n(746),er=n(3089),tr=n(2205),nr=n(3090),rr=n(3091),ar=n.n(rr),ir=n(373),cr=Object(v.default)(nr.a)(He||(He=Object(g.a)(["\n  display: flex;\n  margin-top: ",";\n  margin-bottom: ",";\n  box-shadow: 1px 2px 10px 0 rgba(212, 212, 211, 0.59);\n  box-sizing: border-box;\n  max-width: 100%;\n  padding: 52px 54px;\n  justify-content: center;\n  gap: ",";\n"])),(function(e){return e.theme.margin.md}),(function(e){return e.theme.margin.md}),(function(e){return e.theme.margin.sm})),sr=Object(v.default)(ar.a)(Ge||(Ge=Object(g.a)(["\n  height: 16px;\n  vertical-align: middle;\n"]))),or=function(){return Object(P.jsxs)(cr,{children:[Object(P.jsx)(En.a,{alt:"Info",src:ir.a}),Object(P.jsxs)(y.Text,{size:"xl",children:["Simply hover over an app and click on the",Object(P.jsx)(sr,{}),"to bookmark the app here for convenient access"]})]})},dr=n(71),lr=v.default.div(We||(We=Object(g.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),ur=Object(v.css)(Ve||(Ve=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),jr=v.default.div(Ke||(Ke=Object(g.a)(["\n  width: 100%;\n  height: 100%;\n  ",";\n"])),ur),br=Object(v.default)(bn.a.div)(Je||(Je=Object(g.a)(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(243px, 1fr));\n  column-gap: 20px;\n  row-gap: 20px;\n  justify-content: space-evenly;\n"]))),pr=v.default.div(Xe||(Xe=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  align-items: center;\n"]))),fr=Object(v.default)(y.Text)(Ye||(Ye=Object(g.a)(["\n  width: 100%;\n  margin: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.margin.xl," 0 ").concat(t.margin.md," 0")})),Or=Object(v.default)(y.IconText)($e||($e=Object(g.a)(["\n  justify-content: center;\n  margin: 16px 55px 20px 0;\n"]))),hr=Object(v.default)(y.Card)(Ze||(Ze=Object(g.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 190px;\n  padding: 0;\n  flex-direction: column;\n  box-shadow: none;\n"]))),xr=v.default.img(Qe||(Qe=Object(g.a)(["\n  height: 90px;\n  margin-bottom: 4px;\n"]))),mr=function(e){var t=e.onRemoveApp,n=Object(dr.a)().safeAddress,r=Object(l.useState)(""),a=Object(m.a)(r,2),i=a[0],c=a[1],s=Object(Qn.a)(),o=s.allApps,d=s.appList,u=s.removeApp,j=s.isLoading,b=s.pinnedSafeApps,p=s.togglePin,f=s.customApps,O=s.addCustomApp,h=function(e,t){var n=Object(l.useMemo)((function(){return new er.a(e,{keys:["name","description"],threshold:.2,findAllMatches:!0})}),[e]);return Object(l.useMemo)((function(){return t?n.search(t).map((function(e){return e.item})):e}),[n,e,t])}(d,i),x=Object(l.useState)(null),g=Object(m.a)(x,2),v=g[0],w=g[1],A=Object(hn.a)(),k=A.open,C=A.toggle,S=A.clickAway,T=0===h.length&&i,I=!!f.length&&!i,E=!i;return j||!n?Object(P.jsx)(jr,{children:Object(P.jsx)(y.Loader,{size:"md"})}):Object(P.jsxs)(lr,{children:[Object(P.jsx)(y.Menu,{children:Object(P.jsx)(On.a,{start:"sm",xs:12,children:Object(P.jsx)(y.Breadcrumb,{children:Object(P.jsx)(y.BreadcrumbElement,{iconType:"apps",text:"Apps"})})})}),Object(P.jsxs)(pr,{children:[Object(P.jsx)(kn,{value:i,onValueChange:function(e){return c(e.replace(/\s{2,}/g," "))}}),E&&Object(P.jsxs)(fn.a,{title:Object(P.jsx)(y.Text,{color:"placeHolder",strong:!0,size:"md",children:"BOOKMARKED APPS"}),defaultExpanded:!0,children:[0===b.length&&Object(P.jsx)(or,{}),Object(P.jsx)(pn.a,{children:Object(P.jsx)(br,{"data-testid":"safe_apps__pinned-apps-container",children:b.map((function(e){return Object(P.jsx)(tr.c,{safeApp:e,togglePin:p,size:"md",isPinned:!0},e.id)}))})})]}),I&&Object(P.jsx)(fn.a,{title:Object(P.jsx)(y.Text,{color:"placeHolder",strong:!0,size:"md",children:"CUSTOM APPS"}),defaultExpanded:!0,children:Object(P.jsx)(pn.a,{children:Object(P.jsx)(br,{children:f.map((function(e){return Object(P.jsx)(tr.c,{safeApp:e,togglePin:p,onRemove:w,isCustomSafeApp:!0,size:"md"},e.id)}))})})}),Object(P.jsx)(fr,{color:"placeHolder",strong:!0,size:"md",children:i?"SEARCH RESULTS":"ALL APPS"}),T&&Object(P.jsx)(Tn,{query:i,onWalletConnectSearch:function(){return c("WalletConnect")}}),Object(P.jsx)(pn.a,{children:Object(P.jsxs)(br,{"data-testid":"safe_apps__all-apps-container",children:[!i&&Object(P.jsxs)(hr,{children:[Object(P.jsx)(xr,{src:xn,alt:"Add Custom Safe App logo"}),Object(P.jsx)(y.Button,{size:"md",color:"primary",variant:"contained",onClick:function(){return C()},children:"Add custom app"})]}),h.map((function(e){return Object(P.jsx)(tr.c,{safeApp:e,togglePin:p,isPinned:b.some((function(t){return t.id===e.id})),size:"md"},e.id)}))]})})]}),Object(P.jsx)(Or,{color:"secondary",iconSize:"sm",iconType:"info",text:"These are third-party apps, which means they are not owned, controlled, maintained or audited by Safe. Interacting with the apps is at your own risk. Any communication within the Apps is for informational purposes only and must not be construed as investment advice to engage in any transaction.",textSize:"sm"}),k&&Object(P.jsxs)(R.b,{title:"Add app",description:"Add a custom app to the list of apps",handleClose:S,children:[Object(P.jsx)(R.b.Header,{onClose:S,children:Object(P.jsx)(R.b.Header.Title,{children:"Add custom app"})}),Object(P.jsx)(Zn,{closeModal:S,appList:o,onAddApp:O})]}),v&&Object(P.jsxs)(R.b,{title:"Remove app",description:"Confirm for the app removal",handleClose:function(){return w(null)},children:[Object(P.jsx)(R.b.Header,{onClose:function(){return w(null)},children:Object(P.jsx)(R.b.Header.Title,{children:"Remove app"})}),Object(P.jsx)(R.b.Body,{children:Object(P.jsxs)(y.Text,{size:"xl",children:["This action will remove"," ",Object(P.jsx)(y.Text,{size:"xl",strong:!0,as:"span",children:v.name})," ","from the interface"]})}),Object(P.jsx)(R.b.Footer,{children:Object(P.jsx)(R.b.Footer.Buttons,{cancelButtonProps:{testId:"cancel-btn",onClick:function(){return w(null)}},confirmButtonProps:{testId:"confirm-btn",color:"error",onClick:function(){var e=v.url;t(e),u(v.id,e),w(null)},text:"Remove"}})})]})]})},gr=n(2081),vr=n(3117),yr=n(48),wr=n(614),Ar=v.default.div(et||(et=Object(g.a)(["\n  position: relative;\n  margin: 0 auto;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n"]))),kr=v.default.div(tt||(tt=Object(g.a)(["\n  position: relative;\n  display: flex;\n  min-width: 100%;\n  min-height: 100%;\n  transform: translateX(0);\n  height: 426px;\n\n  transition: transform 0.5s ease;\n  transform: translateX(-","%);\n"])),(function(e){return 100*e.activeStep})),Cr=v.default.div(nt||(nt=Object(g.a)(["\n  min-width: 100%;\n  min-height: 100%;\n\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n"]))),Sr=function(e){var t=e.onSlideChange,n=e.children,r=e.initialStep,a=Object(l.useMemo)((function(){return u.a.Children.toArray(n).filter(Boolean)}),[n]),i=Object(l.useState)(r||0),c=Object(m.a)(i,2),s=c[0],o=c[1],d=Object(l.useState)(!1),j=Object(m.a)(d,2),b=j[0],p=j[1];Object(l.useEffect)((function(){var e;return b&&(e=setTimeout((function(){p(!1)}),500)),function(){e&&clearTimeout(e)}}),[b]);var f=0===s;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Ar,{className:"container",children:Object(P.jsx)(kr,{className:"inner",activeStep:s,children:a.map((function(e,t){return Object(P.jsx)(Cr,{children:e},t)}))})}),Object(P.jsxs)(wr.a,{display:"flex",justifyContent:"center",width:"100%",children:[Object(P.jsx)(y.Button,{color:"primary",size:"md",variant:"bordered",fullWidth:!0,onClick:function(){if(!b){var e=s-1;t(e),o(e),p(!0)}},children:f?"Cancel":"Back"}),Object(P.jsx)(y.Button,{color:"primary",size:"md",fullWidth:!0,onClick:function(){if(!b){var e=s+1;t(e),o(e),p(!0)}},style:{marginLeft:10},children:"Continue"})]})]})},Tr=n(2174),Ir=v.default.div(rt||(rt=Object(g.a)(["\n  p,\n  h4 {\n    line-height: 24px;\n  }\n"]))),Er=Object(v.default)(y.Link)(at||(at=Object(g.a)(["\n  text-decoration: none;\n"]))),zr=Object(v.default)(y.Text)(it||(it=Object(g.a)(["\n  text-align: justify;\n"]))),Mr=function(){return Object(P.jsxs)(Ir,{children:[Object(P.jsx)(Tr.a,{size:"lg",children:"Before starting to use Safe dApps..."}),Object(P.jsx)(Tr.b,{size:"sm",bold:!0,centered:!0,children:"Disclaimer"}),Object(P.jsx)(zr,{size:"xl",children:"You are now accessing third-party apps, which we do not own, control, maintain or audit. We are not liable for any loss you may suffer in connection with interacting with the apps, which is at your own risk."}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(zr,{size:"xl",children:"You must read our Terms, which contain more detailed provisions binding on you relating to the apps."}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsxs)(zr,{size:"xl",children:["I have read and understood the"," ",Object(P.jsx)(Er,{href:"https://gnosis-safe.io/terms",size:"xl",rel:"noopener noreferrer",target:"_blank",children:"Terms"})," ","and this Disclaimer, and agree to be bound by them."]})]})},Rr=Object(v.default)(y.Icon)(ct||(ct=Object(g.a)(["\n  margin-top: 10px;\n"]))),Lr=Object(v.default)(y.Title)(st||(st=Object(g.a)(["\n  font-weight: bold;\n  text-align: center;\n"]))),Pr=Object(v.default)(y.Dot)(ot||(ot=Object(g.a)(["\n  min-width: 19px;\n  width: 19px;\n  height: 19px;\n  margin-right: 19px;\n  background: ",";\n  color: ",";\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.secondaryHover})),Dr=Object(v.default)(y.Text)(dt||(dt=Object(g.a)(["\n  position: absolute;\n  font-size: 11px;\n"]))),Nr=function(e){var t=e.practices;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Rr,{size:"md",type:"privacyPolicy",color:"primary"}),Object(P.jsx)(Lr,{size:"xs",children:"Best security practices when interacting with Safe Apps"}),t.map((function(e,t){return Object(P.jsxs)(wr.a,{display:"flex",marginBottom:2,alignItems:"flex-start",children:[Object(P.jsx)(Pr,{color:"primary",children:Object(P.jsx)(Dr,{size:"sm",children:t+1})}),Object(P.jsxs)(wr.a,{flexDirection:"column",children:[Object(P.jsx)(y.Text,{size:"xl",children:e.title}),e.subtitle&&Object(P.jsx)(y.Text,{size:"xl",children:e.subtitle})]})]},t)}))]})},Br=n(2279),Ur=[{id:"1",title:"Always load Safe Apps from trusted sources.",imageSrc:"./safe-apps-security-practices/1.png"},{id:"2",title:"Check the Safe App link you are trying to use.",subtitle:"Do you know the domain and trust it?"},{id:"3",title:"Always check transaction information while creating it, before proposing it to the Safe.",imageSrc:"./safe-apps-security-practices/2.png"},{id:"4",title:"Do a second check on transaction data before signing in the queue.",imageSrc:"./safe-apps-security-practices/3.png"}],_r=v.default.div(lt||(lt=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 160px;\n"]))),Fr=Object(v.default)(_r)(ut||(ut=Object(g.a)(["\n  height: 190px;\n  padding: 0 30px;\n"]))),qr=v.default.div(jt||(jt=Object(g.a)(["\n  margin: 40px 20px 64px 20px;\n"]))),Hr=Object(v.default)(y.Title)(bt||(bt=Object(g.a)(["\n  text-align: center;\n"]))),Gr=v.default.img(pt||(pt=Object(g.a)(["\n  max-width: 100%;\n  max-height: 100%;\n  margin-top: 15px;\n"]))),Wr=function(e){var t=e.title,n=e.subtitle,r=e.imageSrc,a=e.children;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(y.Icon,{size:"md",type:"privacyPolicy"}),Object(P.jsx)(Tr.a,{size:"lg",children:"Secure your activity with Safe dApps by following simple rules"}),r?Object(P.jsx)(Fr,{children:Object(P.jsx)(Gr,{src:r,alt:t})}):Object(P.jsx)(_r,{children:a}),Object(P.jsxs)(qr,{children:[Object(P.jsx)(Hr,{size:"xs",children:t}),n&&Object(P.jsx)(Hr,{size:"xs",children:n})]})]})},Vr=n(2223),Kr=n(2335),Jr=function(e){var t=e.features,n=e.onFeatureSelectionChange;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(y.Icon,{size:"md",type:"privacyPolicy"}),Object(P.jsx)(Tr.a,{size:"lg",children:"Manage the features Safe App can use"}),Object(P.jsxs)(wr.a,{mx:1,my:3,children:[Object(P.jsx)(y.Text,{size:"xl",children:"This app is requesting permission to use:"}),Object(P.jsx)("br",{}),Object(P.jsx)(wr.a,{display:"flex",flexDirection:"column",ml:2,children:t.map((function(e,t){var r=e.feature,a=e.checked;return Object(P.jsx)(Kr.a,{name:"checkbox",checked:a,onChange:function(e,t){return n(r,t)},label:nn.a[r].displayName},t)}))})]})]})},Xr=function(e){var t=e.onCancel,n=e.onConfirm,r=e.appUrl,a=e.features,i=e.isConsentAccepted,c=e.isSafeAppInDefaultList,s=e.isFirstTimeAccessingApp,o=e.isExtendedListReviewed,d=e.isPermissionsReviewCompleted,u=Object(l.useState)(!1),j=Object(m.a)(u,2),b=j[0],f=j[1],O=Object(l.useState)(a.map((function(e){return{feature:e,checked:!0}}))),h=Object(m.a)(O,2),x=h[0],g=h[1],v=Object(l.useState)(0),y=Object(m.a)(v,2),w=y[0],A=y[1],k=Object(l.useMemo)((function(){var e=0;return i||(e+=1),s&&o&&(e+=1),s&&!o&&(e+=Ur.length),!c&&s&&(e+=1),d||(e+=1),e}),[i,o,s,c,d]),C=Object(l.useMemo)((function(){return 100*(w+1)/k}),[w,k]),S=Object(l.useMemo)((function(){return w===k-1}),[w,k]),T=Object(l.useMemo)((function(){return!c&&s}),[s,c]);return Object(P.jsx)(Yr,{children:Object(P.jsxs)($r,{children:[Object(P.jsx)(Qr,{variant:"determinate",value:C,$isWarningStep:S&&T}),Object(P.jsx)(Zr,{container:!0,justifyContent:"center",alignItems:"center",direction:"column",children:Object(P.jsxs)(Sr,{onSlideChange:function(e){var r=e===k;-1===e&&t(),r&&n(b,x.map((function(e){return{feature:e.feature,status:e.checked?wt.b.GRANTED:wt.b.DENIED}}))),A(e)},children:[!i&&Object(P.jsx)(Mr,{}),s&&o&&Object(P.jsx)(Nr,{practices:Ur,appUrl:r}),s&&!o&&Ur.map((function(e){return e.imageSrc?Object(P.jsx)(Wr,Object(p.a)({},e),e.id):Object(P.jsx)(Wr,Object(p.a)(Object(p.a)({},e),{},{children:Object(P.jsx)(Vr.a,{url:r})}),e.id)})),!d&&Object(P.jsx)(Jr,{features:x,onFeatureSelectionChange:function(e,t){g(x.map((function(n){return n.feature===e?{feature:e,checked:t}:n})))}}),T&&Object(P.jsx)(Br.a,{url:r,onHideWarning:f})]})})]})})},Yr=v.default.div(ft||(ft=Object(g.a)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),$r=v.default.div(Ot||(Ot=Object(g.a)(["\n  width: 450px;\n  background-color: ",";\n  border-radius: 8px;\n  box-shadow: 1px 2px 10px 0 ",";\n"])),(function(e){return e.theme.colors.white}),(function(e){var t=e.theme;return Object(yr.a)(t.colors.shadow.color,.18)})),Zr=Object(v.default)(gr.a)(ht||(ht=Object(g.a)(["\n  text-align: center;\n  padding: 24px;\n"]))),Qr=Object(v.default)(vr.a)(xt||(xt=Object(g.a)(["\n  height: 6px;\n  background-color: #fff;\n  border-radius: 8px 8px 0 0;\n  .MuiLinearProgress-bar {\n    background-color: ",";\n    border-radius: 8px;\n  }\n"])),(function(e){var t=e.theme;return e.$isWarningStep?"#e8663d":t.colors.primary})),ea=Object(l.memo)(Xr),ta=n(8),na=n(14),ra=n(15),aa=function(e){Object(na.a)(n,e);var t=Object(ra.a)(n);function n(e){var r;return Object(Oe.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r.state={hasError:!1},r}return Object(ta.a)(n,[{key:"componentDidCatch",value:function(e,t){console.error("Uncaught error:",e,t)}},{key:"render",value:function(){return this.state.hasError?this.props.render():this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(u.a.Component),ia=n(142),ca=v.default.div(mt||(mt=Object(g.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),sa=v.default.div(gt||(gt=Object(g.a)(["\n  width: 400px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n\n  > * {\n    margin-top: 10px;\n  }\n"]))),oa=v.default.div(vt||(vt=Object(g.a)(["\n  display: inline-flex;\n  margin-bottom: 10px;\n\n  > :first-of-type {\n    margin-right: 5px;\n  }\n"]))),da=function(){var e=Object(j.h)(),t=Object(A.d)(ia.b),n=t.currentShortName,r=t.currentSafeAddress;return Object(P.jsx)(ca,{children:Object(P.jsxs)(sa,{children:[Object(P.jsx)(y.Title,{size:"md",children:"Safe App could not be loaded."}),Object(P.jsx)(y.FixedIcon,{type:"networkError"}),Object(P.jsxs)("div",{children:[Object(P.jsxs)(y.Text,{size:"xl",as:"span",children:["In case the problem persists, please reach out to us via"," "]}),Object(P.jsxs)(oa,{children:[Object(P.jsx)("a",{target:"_blank",href:"https://chat.gnosis-safe.io",rel:"noopener noreferrer",children:Object(P.jsx)(y.Text,{color:"primary",size:"lg",as:"span",children:"Discord"})}),Object(P.jsx)(y.Icon,{type:"externalLink",color:"primary",size:"sm"})]})]}),Object(P.jsx)(y.Link,{size:"lg",color:"primary",onClick:function(){e.push(Object(Hn.p)(Hn.i.APPS,{safeAddress:r,shortName:n}))},children:"Go back to the Safe Apps list"})]})})},la=n(41),ua=n(115),ja="APPS_SECURITY_FEEDBACK_MODAL";t.default=function(){var e=Object(j.h)(),t=(0,Object(b.a)().getAppUrl)(),n=Object(nn.c)(),r=n.addPermissions,a=n.getPermissions,i=n.getAllowedFeaturesList,c=Object(Qn.a)(),s=c.isLoading,o=c.getSafeApp,d=cn(t),u=d.isLoading,p=d.safeApp,f=function(e){var t=e.url,n=e.safeApp,r=e.safeAppManifest,a=e.addPermissions,i=e.getPermissions,c=Object(l.useRef)(!1),s=Object(l.useState)([]),o=Object(m.a)(s,2),d=o[0],u=o[1],j=Object(l.useState)(!1),b=Object(m.a)(j,2),p=b[0],f=b[1],O=Object(l.useState)([]),h=Object(m.a)(O,2),x=h[0],g=h[1],v=Object(l.useState)(!1),y=Object(m.a)(v,2),w=y[0],A=y[1],k=Object(l.useState)(!1),C=Object(m.a)(k,2),S=C[0],T=C[1];Object(l.useEffect)((function(){var e=Object(ua.b)(ja)||{appsReviewed:[],extendedListReviewed:!1,customAppsReviewed:[],consentAccepted:!1};e&&(u(e.appsReviewed),f(e.extendedListReviewed),g(e.customAppsReviewed),A(e.consentAccepted))}),[]),Object(l.useEffect)((function(){t||T(!1)}),[t]),Object(l.useEffect)((function(){c.current?Object(ua.f)(ja,{appsReviewed:d,extendedListReviewed:p,customAppsReviewed:x,consentAccepted:w}):c.current=!0}),[d,w,x,p]);var I=Object(l.useMemo)((function(){return!!t&&!!n}),[n,t]),E=Object(l.useMemo)((function(){if(!t)return!0;var e=null===n||void 0===n?void 0:n.id;return e?!(null===d||void 0===d?void 0:d.includes(e)):!(null===x||void 0===x?void 0:x.includes(t))}),[d,x,n,t]),z=Object(l.useMemo)((function(){return!!t&&!!((null===r||void 0===r?void 0:r.safeAppsPermissions)||[]).every((function(e){return i(t).some((function(t){return t.feature===e&&t.status!==wt.b.PROMPT}))}))}),[i,r,t]),M=Object(l.useMemo)((function(){return c.current&&(!w||I&&E||!I&&E&&!S||!z)}),[w,z,I,E,S]),R=Object(l.useCallback)((function(e,r){A(!0);var i=null===n||void 0===n?void 0:n.id;if(i&&!d.includes(i)){var c=[].concat(Object(la.a)(d),[i]);u(c)}else if(e&&!x.includes(t)){var s=[].concat(Object(la.a)(x),[t]);g(s)}p||f(!0),z||a(t,r),T(!0)}),[a,d,x,p,z,n,t]),L=Object(l.useCallback)((function(e){var t=x.filter((function(t){return t!==e}));g(t)}),[x]);return{isModalVisible:M,isSafeAppInDefaultList:I,isFirstTimeAccessingApp:E,isPermissionsReviewCompleted:z,isConsentAccepted:w,isExtendedListReviewed:p,onComplete:R,onRemoveCustomApp:L}}({url:t,safeAppManifest:p,safeApp:o(t),addPermissions:r,getPermissions:a}),O=f.isModalVisible,h=f.isSafeAppInDefaultList,x=f.isFirstTimeAccessingApp,g=f.isConsentAccepted,v=f.isPermissionsReviewCompleted,y=f.isExtendedListReviewed,w=f.onComplete,A=f.onRemoveCustomApp,k=Object(l.useCallback)((function(){return e.goBack()}),[e]);return s||u?Object(P.jsx)("div",{}):t?O?Object(P.jsx)(ea,{onCancel:k,onConfirm:w,appUrl:t,features:p.safeAppsPermissions||[],isConsentAccepted:g,isSafeAppInDefaultList:h,isFirstTimeAccessingApp:x,isExtendedListReviewed:y,isPermissionsReviewCompleted:v}):Object(P.jsx)(aa,{render:function(){return Object(P.jsx)(da,{})},children:Object(P.jsx)(jn,{appUrl:t,allowedFeaturesList:i(t)})}):Object(P.jsx)(mr,{onRemoveApp:A})}}}]);
//# sourceMappingURL=43.2692c4f7.chunk.js.map