(this["webpackJsonpsafe-react"]=this["webpackJsonpsafe-react"]||[]).push([[49],{2052:function(e,t,n){"use strict";n.r(t);var a,c=n(2),r=n.n(c),i=n(11),s=n(17),o=n(269),u=n(1),d=n(21),b=n(164),l=n(22),j=n(2113),x=n(156),O=n(157),f=n(166),m=n(59),p=n(81),h=n(90),g=n(69),v=n(224),k=n(466),w=n(91),y=n(2271),T=n(46),A=n(73),S=n(2118),E=n(104),C=n(5),N=n(268),P=Object(N.a)({container:{padding:"".concat(C.md," ").concat(C.lg)},amount:{marginLeft:C.sm},buttonRow:{height:"84px",justifyContent:"center",gap:"16px"}}),D=n(467),M=n(29),B=n(312),F=n(271),L=n(124),G=n(2153),I=n(2100),_=n(28),R=n(197),z=n(71),U=n(143),X=n(10),J=n(9),H=n(135),V=n(1057),W=n(1065),Y=n(1038),q=n(1039),K=n(87),Q=n(713),Z=n(1040),$=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a,c,i,s,o,u,d,b,j;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.safe,a=t.token,c=t.to,i=t.amount,s=t.paymentToken,o=t.payment,u=t.delegate,d=t.signature,b=Object(v.c)(Object(l.b)())){e.next=4;break}return e.abrupt("return",0);case 4:return j=Object(v.a)(b),e.abrupt("return",j.methods.executeAllowanceTransfer(n,a,c,i,s,o,u,d).estimateGas({from:u}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a,c,i,s,o,u,d,b,j;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.safe,a=t.token,c=t.to,i=t.amount,s=t.paymentToken,o=t.payment,u=t.delegate,d=t.signature,b=Object(v.c)(Object(l.b)())){e.next=4;break}return e.abrupt("return",!1);case 4:return j=Object(v.a)(b),e.abrupt("return",j.methods.executeAllowanceTransfer(n,a,c,i,s,o,u,d).call({from:u}).then((function(){return!0})).catch((function(e){return console.warn("Transaction will fail\n\n",e),!1})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=n(0),ne=J.default.div(a||(a=Object(X.a)(["\n  padding: 0 "," ",";\n"])),C.lg,C.md),ae=function(e){var t=e.children,n=e.txNonce,a=e.txTo,c=e.txType,r=e.onSubmit,i=e.onBack,o=e.onClose,d=e.submitText,j=e.isSubmitDisabled,x=e.txToken,O=e.txDelegate,f=e.txAmount,m=Object(u.useState)(),p=Object(s.a)(m,2),h=p[0],g=p[1],v=Object(u.useState)(),k=Object(s.a)(v,2),w=k[0],y=k[1],S=Object(u.useState)(),E=Object(s.a)(S,2),C=E[0],N=E[1],P=Object(u.useMemo)((function(){return Object(T.f)(null===x||void 0===x?void 0:x.address,Object(B.b)())}),[x]),D=Object(z.a)().safeAddress,F=Object(l.m)(),L=Object(u.useMemo)((function(){return{safe:D,token:P?T.a:(null===x||void 0===x?void 0:x.address)||T.a,to:a||T.a,amount:Object(b.c)(f||"0",(null===x||void 0===x?void 0:x.decimals)||0),paymentToken:T.a,payment:0,delegate:O||T.a,signature:A.c}}),[P,D,f,O,a,null===x||void 0===x?void 0:x.address,null===x||void 0===x?void 0:x.decimals]),G=Object(u.useCallback)((function(){return $(L)}),[L]),I=Object(Q.b)(G,!0,A.c,C),_=Object(u.useCallback)((function(){return ee(L)}),[L]),R=Object(H.c)({manualGasPrice:h,manualMaxPrioFee:w,isExecution:!0,txData:A.c}),U=R.gasPriceFormatted,X=R.gasPrice,J=R.gasMaxPrioFee,ae=R.gasMaxPrioFeeFormatted,ce=Object(Z.a)({checkTxExecution:_,isExecution:!0,txData:"",gasLimit:I,gasPrice:X,gasMaxPrioFee:J}),re=Object(u.useCallback)((function(){return I&&I!==Q.a&&X&&J?Object(H.b)(I,X,J,F.decimals).gasCostFormatted:"> 0.001"}),[I,J,X,F.decimals]),ie=Object(q.a)(ce),se=Object(s.a)(ie,2),oe=se[0],ue=se[1],de="ENABLED",be="".concat(re()," ").concat(F.symbol);return Object(te.jsx)(V.a,{isExecution:!0,ethGasLimit:I,ethGasPrice:U,ethMaxPrioFee:ae,safeNonce:n,parametersStatus:de,closeEditModalCallback:function(e){var t=U,n=e.ethGasPrice,a=I,c=e.ethGasLimit,r=ae,i=e.ethMaxPrioFee;t!==n&&g(n),r!==i&&y(i),a!==c&&N(c)},txType:c,children:function(e,n){return Object(te.jsxs)(te.Fragment,{children:[t,Object(te.jsx)(ne,{children:Object(te.jsx)(Y.a,{txParameters:e,gasCost:be,onEdit:n,parametersStatus:de})}),Object(te.jsx)(W.a,{isCreation:!0,isExecution:!0,isRejection:!1,safeNonce:e.safeNonce,txEstimationExecutionStatus:ce}),Object(te.jsx)(K.b.Footer,{withoutBorder:!0,children:Object(te.jsx)(K.b.Footer.Buttons,{cancelButtonProps:{onClick:i||o,text:i?"Back":"Cancel"},confirmButtonProps:{onClick:function(){return function(e){if(ue(K.a.LOADING),!D)return ue(K.a.READY),void Object(M.c)(M.b._802);r(e)}(e)},status:oe,disabled:j,color:void 0,text:ce===H.a.LOADING?"Estimating":d,testId:"submit-tx-btn"}})})]})}})},ce=n(140),re=n(89),ie=Object(o.a)(P);t.default=function(e){var t,n=e.onClose,a=e.onPrev,c=e.tx,o=ie(),C=Object(d.c)(),N=Object(z.a)().safeAddress,P=Object(l.m)(),X=Object(d.d)(E.a),J=Object(u.useMemo)((function(){return X.find((function(e){return Object(T.f)(e.address,c.token)}))}),[X,c.token]),H=Object(u.useMemo)((function(){return Object(T.f)(null===J||void 0===J?void 0:J.address,Object(B.b)())}),[J]),V=H?c.recipientAddress:(null===J||void 0===J?void 0:J.address)||"",W=H?Object(b.c)(c.amount,P.decimals):"0",Y=function(e,t,n,a){var c=Object(u.useState)(""),o=Object(s.a)(c,2),d=o[0],l=o[1];return Object(u.useEffect)((function(){var c=function(){var c=Object(i.a)(r.a.mark((function c(){var i,s,o;return r.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(a){c.next=2;break}return c.abrupt("return");case 2:i=A.c,e||(s=Object(y.a)(a.address),o=Object(b.c)(t,a.decimals),i=s.methods.transfer(n,o).encodeABI()),l(i);case 5:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();c()}),[e,n,t,a]),d}(H,c.amount,c.recipientAddress,J),q=Object(L.e)(c.txType),K=Object(d.d)(g.a),Q=Object(u.useCallback)(function(){var e=Object(i.a)(r.a.mark((function e(t){var a,i,s,o,u,d,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(q&&J&&c.tokenSpendingLimit)){e.next=26;break}if(a=H?T.a:J.address,i=Object(v.c)(K)){e.next=5;break}return e.abrupt("return");case 5:return s=Object(v.a)(i),o=Object(ce.c)(w.a.SPENDING_LIMIT_TX),Object(_.d)(R.a.USE_SPENDING_LIMIT),u="",e.prev=9,u=C(Object(re.h)(o.beforeExecution)),e.next=13,s.methods.executeAllowanceTransfer(N,a,c.recipientAddress,Object(b.c)(c.amount,J.decimals),T.a,0,c.tokenSpendingLimit.delegate,A.c);case 13:return d=e.sent,C(Object(re.c)({key:u,read:!1})),l=Object(U.b)(c.tokenSpendingLimit.delegate,t),e.next=18,d.send(l).on("transactionHash",(function(){n(),C(Object(re.h)(o.afterExecution.noMoreConfirmationsNeeded))}));case 18:e.next=25;break;case 20:e.prev=20,e.t0=e.catch(9),Object(M.c)(M.b._801,e.t0.message),C(Object(re.c)({key:u,read:!1})),C(Object(re.h)(o.afterRejection));case 25:n();case 26:case"end":return e.stop()}}),e,null,[[9,20]])})));return function(t){return e.apply(this,arguments)}}(),[K,C,H,q,n,N,c.amount,c.recipientAddress,c.tokenSpendingLimit,J]),Z=Object(u.useCallback)(function(){var e=Object(i.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(Object(k.b)({safeAddress:N,to:V,valueInWei:W,txData:Y,txNonce:t.safeNonce,safeTxGas:t.safeTxGas,ethParameters:t,notifiedTransaction:w.a.STANDARD_TX,delayExecution:a})),n();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[C,n,N,Y,V,W]),$=Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(F.a,{onClose:n,subTitle:Object(I.a)(2,2),title:"Send funds"}),Object(te.jsx)(f.a,{}),q?Object(te.jsx)(x.a,{className:o.container,children:"Spending limit transactions only appear in the interface once they are successfully mined and indexed. Pending transactions can only be viewed in your signer wallet application or under your owner wallet address through a Blockchain Explorer."}):null,Object(te.jsxs)(x.a,{className:o.container,children:[J&&Object(te.jsx)(p.a,{align:"center",margin:"md",children:Object(te.jsx)(G.a,{token:J,text:"".concat(c.amount," ").concat(J.symbol)})}),Object(te.jsx)(S.a,{text:"Sending from"}),Object(te.jsx)(j.a,{withArrow:!0}),Object(te.jsx)(p.a,{margin:"xs",children:Object(te.jsx)(m.a,{color:"disabled",noMargin:!0,size:"lg",children:"Recipient"})}),Object(te.jsx)(p.a,{align:"center",margin:"md","data-testid":"recipient-review-step",children:Object(te.jsx)(O.a,{xs:12,children:Object(te.jsx)(h.a,{hash:c.recipientAddress,name:c.recipientName,strongName:!0,showCopyBtn:!0,showAvatar:!0,explorerUrl:Object(l.i)(c.recipientAddress)})})})]})]});return q?Object(te.jsx)(ae,{txData:"",txToken:J,txAmount:c.amount,txDelegate:null===(t=c.tokenSpendingLimit)||void 0===t?void 0:t.delegate,txTo:c.recipientAddress,onSubmit:Q,onBack:a,txType:c.txType||"",children:$}):Object(te.jsx)(D.a,{txData:Y,txValue:W,txTo:V,txType:c.txType||"",onSubmit:Z,onBack:a,children:$})}},2100:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e,t){return"Step ".concat(e," of ").concat(t)}},2113:function(e,t,n){"use strict";var a,c,r,i=n(10),s=n(9),o=n(13),u=n(0),d=s.default.div(a||(a=Object(i.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  margin: 8px 0;\n\n  svg {\n    margin: 0 12px 0 4px;\n  }\n"]))),b=Object(s.default)(o.Divider)(c||(c=Object(i.a)(["\n  width: 100%;\n"]))),l=Object(s.default)(o.Icon)(r||(r=Object(i.a)(["\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 0 20px;\n  background: white;\n\n  & svg {\n    margin: 0;\n  }\n"])));t.a=function(e){var t=e.withArrow;return Object(u.jsxs)(d,{children:[t&&Object(u.jsx)(l,{type:"arrowDown",size:"md"}),Object(u.jsx)(b,{})]})}},2118:function(e,t,n){"use strict";var a,c=n(10),r=n(21),i=n(9),s=n(22),o=n(56),u=n(59),d=n(336),b=n(5),l=n(156),j=n(81),x=n(90),O=n(0),f=Object(i.default)(l.a)(a||(a=Object(c.a)(["\n  font-size: 12px;\n  line-height: 1.08;\n  letter-spacing: -0.5px;\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  margin-top: ",";\n  margin-left: 40px;\n  border-radius: 3px;\n"])),b.border,b.xs);t.a=function(e){var t=e.text,n=Object(r.d)(o.i),a=n.address,c=n.ethBalance,i=n.name,b=Object(s.m)();return Object(O.jsxs)(O.Fragment,{children:[t&&Object(O.jsx)(j.a,{margin:"sm",children:Object(O.jsx)(u.a,{color:"black400",noMargin:!0,size:"lg",children:t})}),Object(O.jsx)(x.a,{hash:a,name:i,strongName:!0,explorerUrl:Object(s.i)(a),showAvatar:!0,showCopyBtn:!0}),c&&Object(O.jsx)(f,{children:Object(O.jsxs)(u.a,{noMargin:!0,children:["Balance: ",Object(O.jsx)(d.a,{"data-testid":"current-eth-balance",children:"".concat(c," ").concat(b.symbol)})]})})]})}},2153:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a,c,r=n(10),i=n(9),s=n(741),o=n(59),u=n(156),d=n(0),b=i.default.div(a||(a=Object(r.a)(["\n  width: 100%;\n  text-align: center;\n"]))),l=Object(i.default)(u.a)(c||(c=Object(r.a)(["\n  width: 40px;\n  margin: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  & img {\n    width: 26px;\n    height: auto;\n  }\n"]))),j=function(e){var t=e.token,n=e.text;return Object(d.jsxs)(b,{children:[Object(d.jsx)(l,{children:Object(d.jsx)("img",{alt:t.name,onError:s.a,src:t.logoUri||""})}),Object(d.jsx)(o.a,{size:"xl",color:"black600",noMargin:!0,style:{marginTop:"8px"},children:n})]})}},2271:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var a=n(2372),c=n(2373),r=n(34),i=function(e){return new(Object(r.f)().eth.Contract)(a.abi,e)},s=function(e){return new(Object(r.f)().eth.Contract)(c.abi,e)}}}]);
//# sourceMappingURL=49.89371a79.chunk.js.map